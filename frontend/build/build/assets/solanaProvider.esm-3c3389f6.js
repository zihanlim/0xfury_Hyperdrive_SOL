import{s as Bo,g as jr,b as Zi,i as Yi,n as vo,a as ht,c as nt,d as ko,e as Ao,_ as Io,f as _o,h as Ro,j as To,p as Co,k as Uo,r as Po,u as Qi,B as bi,l as Ot,m as At,o as It,C as Pr,q as jn,t as Xt,v as br,w as Wr,x as Le,y as Nt,z as K,A as _,D as ne,E as xi,W as Wn,J as Gn,F as Vn,G as Lo}from"./index-cef80337.js";import{n as Fo}from"./nacl-fast-6bf7e9ff.js";var Ir=Bo.Buffer;function Oo(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),a=s.charCodeAt(0);if(e[a]!==255)throw new TypeError(s+" is ambiguous");e[a]=r}var u=n.length,c=n.charAt(0),h=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function g(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=Ir.from(m)),!Ir.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var x=0,B=0,S=0,R=m.length;S!==R&&m[S]===0;)S++,x++;for(var I=(R-S)*p+1>>>0,A=new Uint8Array(I);S!==R;){for(var M=m[S],T=0,D=I-1;(M!==0||T<B)&&D!==-1;D--,T++)M+=256*A[D]>>>0,A[D]=M%u>>>0,M=M/u>>>0;if(M!==0)throw new Error("Non-zero carry");B=T,S++}for(var O=I-B;O!==I&&A[O]===0;)O++;for(var j=c.repeat(x);O<I;++O)j+=n.charAt(A[O]);return j}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return Ir.alloc(0);for(var x=0,B=0,S=0;m[x]===c;)B++,x++;for(var R=(m.length-x)*h+1>>>0,I=new Uint8Array(R);m[x];){var A=e[m.charCodeAt(x)];if(A===255)return;for(var M=0,T=R-1;(A!==0||M<S)&&T!==-1;T--,M++)A+=u*I[T]>>>0,I[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");S=M,x++}for(var D=R-S;D!==R&&I[D]===0;)D++;var O=Ir.allocUnsafe(B+(R-D));O.fill(0,0,B);for(var j=B;D!==R;)O[j++]=I[D++];return O}function E(m){var x=w(m);if(x)return x;throw new Error("Non-base"+u+" character")}return{encode:g,decodeUnsafe:w,decode:E}}var No=Oo,$o=No,Mo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",es=$o(Mo);const fe=jr(es);var ee={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Zi,t=Yi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=I,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const l=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(l,i),l.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(l){if(l>s)throw new RangeError('The value "'+l+'" is invalid for option "size"');const i=new Uint8Array(l);return Object.setPrototypeOf(i,c.prototype),i}function c(l,i,o){if(typeof l=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(l)}return h(l,i,o)}c.poolSize=8192;function h(l,i,o){if(typeof l=="string")return E(l,i);if(ArrayBuffer.isView(l))return x(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(we(l,ArrayBuffer)||l&&we(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(l,SharedArrayBuffer)||l&&we(l.buffer,SharedArrayBuffer)))return B(l,i,o);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=l.valueOf&&l.valueOf();if(f!=null&&f!==l)return c.from(f,i,o);const d=S(l);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return c.from(l[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}c.from=function(l,i,o){return h(l,i,o)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function p(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function g(l,i,o){return p(l),l<=0?u(l):i!==void 0?typeof o=="string"?u(l).fill(i,o):u(l).fill(i):u(l)}c.alloc=function(l,i,o){return g(l,i,o)};function w(l){return p(l),u(l<0?0:R(l)|0)}c.allocUnsafe=function(l){return w(l)},c.allocUnsafeSlow=function(l){return w(l)};function E(l,i){if((typeof i!="string"||i==="")&&(i="utf8"),!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const o=A(l,i)|0;let f=u(o);const d=f.write(l,i);return d!==o&&(f=f.slice(0,d)),f}function m(l){const i=l.length<0?0:R(l.length)|0,o=u(i);for(let f=0;f<i;f+=1)o[f]=l[f]&255;return o}function x(l){if(we(l,Uint8Array)){const i=new Uint8Array(l);return B(i.buffer,i.byteOffset,i.byteLength)}return m(l)}function B(l,i,o){if(i<0||l.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');let f;return i===void 0&&o===void 0?f=new Uint8Array(l):o===void 0?f=new Uint8Array(l,i):f=new Uint8Array(l,i,o),Object.setPrototypeOf(f,c.prototype),f}function S(l){if(c.isBuffer(l)){const i=R(l.length)|0,o=u(i);return o.length===0||l.copy(o,0,0,i),o}if(l.length!==void 0)return typeof l.length!="number"||Ct(l.length)?u(0):m(l);if(l.type==="Buffer"&&Array.isArray(l.data))return m(l.data)}function R(l){if(l>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return l|0}function I(l){return+l!=l&&(l=0),c.alloc(+l)}c.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==c.prototype},c.compare=function(i,o){if(we(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),we(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(i)||!c.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;let f=i.length,d=o.length;for(let y=0,b=Math.min(f,d);y<b;++y)if(i[y]!==o[y]){f=i[y],d=o[y];break}return f<d?-1:d<f?1:0},c.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return c.alloc(0);let f;if(o===void 0)for(o=0,f=0;f<i.length;++f)o+=i[f].length;const d=c.allocUnsafe(o);let y=0;for(f=0;f<i.length;++f){let b=i[f];if(we(b,Uint8Array))y+b.length>d.length?(c.isBuffer(b)||(b=c.from(b)),b.copy(d,y)):Uint8Array.prototype.set.call(d,b,y);else if(c.isBuffer(b))b.copy(d,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=b.length}return d};function A(l,i){if(c.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||we(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const o=l.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&o===0)return 0;let d=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return Tt(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return ar(l).length;default:if(d)return f?-1:Tt(l).length;i=(""+i).toLowerCase(),d=!0}}c.byteLength=A;function M(l,i,o){let f=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(l||(l="utf8");;)switch(l){case"hex":return ln(this,i,o);case"utf8":case"utf-8":return at(this,i,o);case"ascii":return cn(this,i,o);case"latin1":case"binary":return un(this,i,o);case"base64":return Ze(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fn(this,i,o);default:if(f)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),f=!0}}c.prototype._isBuffer=!0;function T(l,i,o){const f=l[i];l[i]=l[o],l[o]=f}c.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<i;o+=2)T(this,o,o+1);return this},c.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<i;o+=4)T(this,o,o+3),T(this,o+1,o+2);return this},c.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<i;o+=8)T(this,o,o+7),T(this,o+1,o+6),T(this,o+2,o+5),T(this,o+3,o+4);return this},c.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?at(this,0,i):M.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(i){if(!c.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:c.compare(this,i)===0},c.prototype.inspect=function(){let i="";const o=n.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(i,o,f,d,y){if(we(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(o===void 0&&(o=0),f===void 0&&(f=i?i.length:0),d===void 0&&(d=0),y===void 0&&(y=this.length),o<0||f>i.length||d<0||y>this.length)throw new RangeError("out of range index");if(d>=y&&o>=f)return 0;if(d>=y)return-1;if(o>=f)return 1;if(o>>>=0,f>>>=0,d>>>=0,y>>>=0,this===i)return 0;let b=y-d,F=f-o;const X=Math.min(b,F),V=this.slice(d,y),Z=i.slice(o,f);for(let z=0;z<X;++z)if(V[z]!==Z[z]){b=V[z],F=Z[z];break}return b<F?-1:F<b?1:0};function D(l,i,o,f,d){if(l.length===0)return-1;if(typeof o=="string"?(f=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,Ct(o)&&(o=d?0:l.length-1),o<0&&(o=l.length+o),o>=l.length){if(d)return-1;o=l.length-1}else if(o<0)if(d)o=0;else return-1;if(typeof i=="string"&&(i=c.from(i,f)),c.isBuffer(i))return i.length===0?-1:O(l,i,o,f,d);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(l,i,o):Uint8Array.prototype.lastIndexOf.call(l,i,o):O(l,[i],o,f,d);throw new TypeError("val must be string, number or Buffer")}function O(l,i,o,f,d){let y=1,b=l.length,F=i.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(l.length<2||i.length<2)return-1;y=2,b/=2,F/=2,o/=2}function X(Z,z){return y===1?Z[z]:Z.readUInt16BE(z*y)}let V;if(d){let Z=-1;for(V=o;V<b;V++)if(X(l,V)===X(i,Z===-1?0:V-Z)){if(Z===-1&&(Z=V),V-Z+1===F)return Z*y}else Z!==-1&&(V-=V-Z),Z=-1}else for(o+F>b&&(o=b-F),V=o;V>=0;V--){let Z=!0;for(let z=0;z<F;z++)if(X(l,V+z)!==X(i,z)){Z=!1;break}if(Z)return V}return-1}c.prototype.includes=function(i,o,f){return this.indexOf(i,o,f)!==-1},c.prototype.indexOf=function(i,o,f){return D(this,i,o,f,!0)},c.prototype.lastIndexOf=function(i,o,f){return D(this,i,o,f,!1)};function j(l,i,o,f){o=Number(o)||0;const d=l.length-o;f?(f=Number(f),f>d&&(f=d)):f=d;const y=i.length;f>y/2&&(f=y/2);let b;for(b=0;b<f;++b){const F=parseInt(i.substr(b*2,2),16);if(Ct(F))return b;l[o+b]=F}return b}function le(l,i,o,f){return ct(Tt(i,l.length-o),l,o,f)}function Ae(l,i,o,f){return ct(gn(i),l,o,f)}function qe(l,i,o,f){return ct(ar(i),l,o,f)}function Oe(l,i,o,f){return ct(yn(i,l.length-o),l,o,f)}c.prototype.write=function(i,o,f,d){if(o===void 0)d="utf8",f=this.length,o=0;else if(f===void 0&&typeof o=="string")d=o,f=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(f)?(f=f>>>0,d===void 0&&(d="utf8")):(d=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const y=this.length-o;if((f===void 0||f>y)&&(f=y),i.length>0&&(f<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let b=!1;for(;;)switch(d){case"hex":return j(this,i,o,f);case"utf8":case"utf-8":return le(this,i,o,f);case"ascii":case"latin1":case"binary":return Ae(this,i,o,f);case"base64":return qe(this,i,o,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,i,o,f);default:if(b)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),b=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ze(l,i,o){return i===0&&o===l.length?e.fromByteArray(l):e.fromByteArray(l.slice(i,o))}function at(l,i,o){o=Math.min(l.length,o);const f=[];let d=i;for(;d<o;){const y=l[d];let b=null,F=y>239?4:y>223?3:y>191?2:1;if(d+F<=o){let X,V,Z,z;switch(F){case 1:y<128&&(b=y);break;case 2:X=l[d+1],(X&192)===128&&(z=(y&31)<<6|X&63,z>127&&(b=z));break;case 3:X=l[d+1],V=l[d+2],(X&192)===128&&(V&192)===128&&(z=(y&15)<<12|(X&63)<<6|V&63,z>2047&&(z<55296||z>57343)&&(b=z));break;case 4:X=l[d+1],V=l[d+2],Z=l[d+3],(X&192)===128&&(V&192)===128&&(Z&192)===128&&(z=(y&15)<<18|(X&63)<<12|(V&63)<<6|Z&63,z>65535&&z<1114112&&(b=z))}}b===null?(b=65533,F=1):b>65535&&(b-=65536,f.push(b>>>10&1023|55296),b=56320|b&1023),f.push(b),d+=F}return an(f)}const Ye=4096;function an(l){const i=l.length;if(i<=Ye)return String.fromCharCode.apply(String,l);let o="",f=0;for(;f<i;)o+=String.fromCharCode.apply(String,l.slice(f,f+=Ye));return o}function cn(l,i,o){let f="";o=Math.min(l.length,o);for(let d=i;d<o;++d)f+=String.fromCharCode(l[d]&127);return f}function un(l,i,o){let f="";o=Math.min(l.length,o);for(let d=i;d<o;++d)f+=String.fromCharCode(l[d]);return f}function ln(l,i,o){const f=l.length;(!i||i<0)&&(i=0),(!o||o<0||o>f)&&(o=f);let d="";for(let y=i;y<o;++y)d+=wn[l[y]];return d}function fn(l,i,o){const f=l.slice(i,o);let d="";for(let y=0;y<f.length-1;y+=2)d+=String.fromCharCode(f[y]+f[y+1]*256);return d}c.prototype.slice=function(i,o){const f=this.length;i=~~i,o=o===void 0?f:~~o,i<0?(i+=f,i<0&&(i=0)):i>f&&(i=f),o<0?(o+=f,o<0&&(o=0)):o>f&&(o=f),o<i&&(o=i);const d=this.subarray(i,o);return Object.setPrototypeOf(d,c.prototype),d};function te(l,i,o){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+i>o)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i],y=1,b=0;for(;++b<o&&(y*=256);)d+=this[i+b]*y;return d},c.prototype.readUintBE=c.prototype.readUIntBE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i+--o],y=1;for(;o>0&&(y*=256);)d+=this[i+--o]*y;return d},c.prototype.readUint8=c.prototype.readUInt8=function(i,o){return i=i>>>0,o||te(i,1,this.length),this[i]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(i,o){return i=i>>>0,o||te(i,2,this.length),this[i]|this[i+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(i,o){return i=i>>>0,o||te(i,2,this.length),this[i]<<8|this[i+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(i,o){return i=i>>>0,o||te(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},c.prototype.readBigUInt64LE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,y=this[++i]+this[++i]*2**8+this[++i]*2**16+f*2**24;return BigInt(d)+(BigInt(y)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=o*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],y=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f;return(BigInt(d)<<BigInt(32))+BigInt(y)}),c.prototype.readIntLE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i],y=1,b=0;for(;++b<o&&(y*=256);)d+=this[i+b]*y;return y*=128,d>=y&&(d-=Math.pow(2,8*o)),d},c.prototype.readIntBE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=o,y=1,b=this[i+--d];for(;d>0&&(y*=256);)b+=this[i+--d]*y;return y*=128,b>=y&&(b-=Math.pow(2,8*o)),b},c.prototype.readInt8=function(i,o){return i=i>>>0,o||te(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},c.prototype.readInt16LE=function(i,o){i=i>>>0,o||te(i,2,this.length);const f=this[i]|this[i+1]<<8;return f&32768?f|4294901760:f},c.prototype.readInt16BE=function(i,o){i=i>>>0,o||te(i,2,this.length);const f=this[i+1]|this[i]<<8;return f&32768?f|4294901760:f},c.prototype.readInt32LE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},c.prototype.readInt32BE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},c.prototype.readBigInt64LE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(f<<24);return(BigInt(d)<<BigInt(32))+BigInt(o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),c.prototype.readBigInt64BE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=(o<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(d)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f)}),c.prototype.readFloatLE=function(i,o){return i=i>>>0,o||te(i,4,this.length),t.read(this,i,!0,23,4)},c.prototype.readFloatBE=function(i,o){return i=i>>>0,o||te(i,4,this.length),t.read(this,i,!1,23,4)},c.prototype.readDoubleLE=function(i,o){return i=i>>>0,o||te(i,8,this.length),t.read(this,i,!0,52,8)},c.prototype.readDoubleBE=function(i,o){return i=i>>>0,o||te(i,8,this.length),t.read(this,i,!1,52,8)};function ce(l,i,o,f,d,y){if(!c.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>d||i<y)throw new RangeError('"value" argument is out of bounds');if(o+f>l.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(i,o,f,d){if(i=+i,o=o>>>0,f=f>>>0,!d){const F=Math.pow(2,8*f)-1;ce(this,i,o,f,F,0)}let y=1,b=0;for(this[o]=i&255;++b<f&&(y*=256);)this[o+b]=i/y&255;return o+f},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(i,o,f,d){if(i=+i,o=o>>>0,f=f>>>0,!d){const F=Math.pow(2,8*f)-1;ce(this,i,o,f,F,0)}let y=f-1,b=1;for(this[o+y]=i&255;--y>=0&&(b*=256);)this[o+y]=i/b&255;return o+f},c.prototype.writeUint8=c.prototype.writeUInt8=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,1,255,0),this[o]=i&255,o+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,65535,0),this[o]=i&255,this[o+1]=i>>>8,o+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=i&255,o+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255,o+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4};function er(l,i,o,f,d){or(i,f,d,l,o,7);let y=Number(i&BigInt(4294967295));l[o++]=y,y=y>>8,l[o++]=y,y=y>>8,l[o++]=y,y=y>>8,l[o++]=y;let b=Number(i>>BigInt(32)&BigInt(4294967295));return l[o++]=b,b=b>>8,l[o++]=b,b=b>>8,l[o++]=b,b=b>>8,l[o++]=b,o}function tr(l,i,o,f,d){or(i,f,d,l,o,7);let y=Number(i&BigInt(4294967295));l[o+7]=y,y=y>>8,l[o+6]=y,y=y>>8,l[o+5]=y,y=y>>8,l[o+4]=y;let b=Number(i>>BigInt(32)&BigInt(4294967295));return l[o+3]=b,b=b>>8,l[o+2]=b,b=b>>8,l[o+1]=b,b=b>>8,l[o]=b,o+8}c.prototype.writeBigUInt64LE=Ee(function(i,o=0){return er(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ee(function(i,o=0){return tr(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(i,o,f,d){if(i=+i,o=o>>>0,!d){const X=Math.pow(2,8*f-1);ce(this,i,o,f,X-1,-X)}let y=0,b=1,F=0;for(this[o]=i&255;++y<f&&(b*=256);)i<0&&F===0&&this[o+y-1]!==0&&(F=1),this[o+y]=(i/b>>0)-F&255;return o+f},c.prototype.writeIntBE=function(i,o,f,d){if(i=+i,o=o>>>0,!d){const X=Math.pow(2,8*f-1);ce(this,i,o,f,X-1,-X)}let y=f-1,b=1,F=0;for(this[o+y]=i&255;--y>=0&&(b*=256);)i<0&&F===0&&this[o+y+1]!==0&&(F=1),this[o+y]=(i/b>>0)-F&255;return o+f},c.prototype.writeInt8=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=i&255,o+1},c.prototype.writeInt16LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,32767,-32768),this[o]=i&255,this[o+1]=i>>>8,o+2},c.prototype.writeInt16BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=i&255,o+2},c.prototype.writeInt32LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,2147483647,-2147483648),this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},c.prototype.writeInt32BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4},c.prototype.writeBigInt64LE=Ee(function(i,o=0){return er(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ee(function(i,o=0){return tr(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rr(l,i,o,f,d,y){if(o+f>l.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function nr(l,i,o,f,d){return i=+i,o=o>>>0,d||rr(l,i,o,4),t.write(l,i,o,f,23,4),o+4}c.prototype.writeFloatLE=function(i,o,f){return nr(this,i,o,!0,f)},c.prototype.writeFloatBE=function(i,o,f){return nr(this,i,o,!1,f)};function ir(l,i,o,f,d){return i=+i,o=o>>>0,d||rr(l,i,o,8),t.write(l,i,o,f,52,8),o+8}c.prototype.writeDoubleLE=function(i,o,f){return ir(this,i,o,!0,f)},c.prototype.writeDoubleBE=function(i,o,f){return ir(this,i,o,!1,f)},c.prototype.copy=function(i,o,f,d){if(!c.isBuffer(i))throw new TypeError("argument should be a Buffer");if(f||(f=0),!d&&d!==0&&(d=this.length),o>=i.length&&(o=i.length),o||(o=0),d>0&&d<f&&(d=f),d===f||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),i.length-o<d-f&&(d=i.length-o+f);const y=d-f;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,f,d):Uint8Array.prototype.set.call(i,this.subarray(f,d),o),y},c.prototype.fill=function(i,o,f,d){if(typeof i=="string"){if(typeof o=="string"?(d=o,o=0,f=this.length):typeof f=="string"&&(d=f,f=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!c.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(i.length===1){const b=i.charCodeAt(0);(d==="utf8"&&b<128||d==="latin1")&&(i=b)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(o<0||this.length<o||this.length<f)throw new RangeError("Out of range index");if(f<=o)return this;o=o>>>0,f=f===void 0?this.length:f>>>0,i||(i=0);let y;if(typeof i=="number")for(y=o;y<f;++y)this[y]=i;else{const b=c.isBuffer(i)?i:c.from(i,d),F=b.length;if(F===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(y=0;y<f-o;++y)this[y+o]=b[y%F]}return this};const Ne={};function Rt(l,i,o){Ne[l]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}Rt("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Rt("ERR_INVALID_ARG_TYPE",function(l,i){return`The "${l}" argument must be of type number. Received type ${typeof i}`},TypeError),Rt("ERR_OUT_OF_RANGE",function(l,i,o){let f=`The value of "${l}" is out of range.`,d=o;return Number.isInteger(o)&&Math.abs(o)>2**32?d=sr(String(o)):typeof o=="bigint"&&(d=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(d=sr(d)),d+="n"),f+=` It must be ${i}. Received ${d}`,f},RangeError);function sr(l){let i="",o=l.length;const f=l[0]==="-"?1:0;for(;o>=f+4;o-=3)i=`_${l.slice(o-3,o)}${i}`;return`${l.slice(0,o)}${i}`}function hn(l,i,o){$e(i,"offset"),(l[i]===void 0||l[i+o]===void 0)&&Ve(i,l.length-(o+1))}function or(l,i,o,f,d,y){if(l>o||l<i){const b=typeof i=="bigint"?"n":"";let F;throw y>3?i===0||i===BigInt(0)?F=`>= 0${b} and < 2${b} ** ${(y+1)*8}${b}`:F=`>= -(2${b} ** ${(y+1)*8-1}${b}) and < 2 ** ${(y+1)*8-1}${b}`:F=`>= ${i}${b} and <= ${o}${b}`,new Ne.ERR_OUT_OF_RANGE("value",F,l)}hn(f,d,y)}function $e(l,i){if(typeof l!="number")throw new Ne.ERR_INVALID_ARG_TYPE(i,"number",l)}function Ve(l,i,o){throw Math.floor(l)!==l?($e(l,o),new Ne.ERR_OUT_OF_RANGE(o||"offset","an integer",l)):i<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${i}`,l)}const dn=/[^+/0-9A-Za-z-_]/g;function pn(l){if(l=l.split("=")[0],l=l.trim().replace(dn,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function Tt(l,i){i=i||1/0;let o;const f=l.length;let d=null;const y=[];for(let b=0;b<f;++b){if(o=l.charCodeAt(b),o>55295&&o<57344){if(!d){if(o>56319){(i-=3)>-1&&y.push(239,191,189);continue}else if(b+1===f){(i-=3)>-1&&y.push(239,191,189);continue}d=o;continue}if(o<56320){(i-=3)>-1&&y.push(239,191,189),d=o;continue}o=(d-55296<<10|o-56320)+65536}else d&&(i-=3)>-1&&y.push(239,191,189);if(d=null,o<128){if((i-=1)<0)break;y.push(o)}else if(o<2048){if((i-=2)<0)break;y.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;y.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;y.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return y}function gn(l){const i=[];for(let o=0;o<l.length;++o)i.push(l.charCodeAt(o)&255);return i}function yn(l,i){let o,f,d;const y=[];for(let b=0;b<l.length&&!((i-=2)<0);++b)o=l.charCodeAt(b),f=o>>8,d=o%256,y.push(d),y.push(f);return y}function ar(l){return e.toByteArray(pn(l))}function ct(l,i,o,f){let d;for(d=0;d<f&&!(d+o>=i.length||d>=l.length);++d)i[d+o]=l[d];return d}function we(l,i){return l instanceof i||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===i.name}function Ct(l){return l!==l}const wn=function(){const l="0123456789abcdef",i=new Array(256);for(let o=0;o<16;++o){const f=o*16;for(let d=0;d<16;++d)i[f+d]=l[o]+l[d]}return i}();function Ee(l){return typeof BigInt>"u"?mn:l}function mn(){throw new Error("BigInt not supported")}})(ee);function Ln(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Do(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function ts(n,...e){if(!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Ko(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ln(n.outputLen),Ln(n.blockLen)}function qo(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Ho(n,e){ts(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const De={number:Ln,bool:Do,bytes:ts,hash:Ko,exists:qo,output:Ho};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zo=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),bn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Qe=(n,e)=>n<<32-e|n>>>e,jo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jo)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Wo(n){if(typeof n!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof n}`);return new TextEncoder().encode(n)}function xr(n){if(typeof n=="string"&&(n=Wo(n)),!(n instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof n})`);return n}class Jn{clone(){return this._cloneInto()}}function $t(n){const e=r=>n().update(xr(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Go(n){const e=(r,s)=>n(s).update(xr(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Vo(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),a=BigInt(4294967295),u=Number(t>>s&a),c=Number(t&a),h=r?4:0,p=r?0:4;n.setUint32(e+h,u,r),n.setUint32(e+p,c,r)}class rs extends Jn{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bn(this.buffer)}update(e){De.exists(this);const{view:t,buffer:r,blockLen:s}=this;e=xr(e);const a=e.length;for(let u=0;u<a;){const c=Math.min(s-this.pos,a-u);if(c===s){const h=bn(e);for(;s<=a-u;u+=s)this.process(h,u);continue}r.set(e.subarray(u,u+c),this.pos),this.pos+=c,u+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){De.exists(this),De.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:a}=this;let{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>s-u&&(this.process(r,0),u=0);for(let w=u;w<s;w++)t[w]=0;Vo(r,s-8,BigInt(this.length*8),a),this.process(r,0);const c=bn(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=h/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<p;w++)c.setUint32(4*w,g[w],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:a,destroyed:u,pos:c}=this;return e.length=s,e.pos=c,e.finished=a,e.destroyed=u,s%t&&e.buffer.set(r),e}}const _r=BigInt(2**32-1),Fn=BigInt(32);function ns(n,e=!1){return e?{h:Number(n&_r),l:Number(n>>Fn&_r)}:{h:Number(n>>Fn&_r)|0,l:Number(n&_r)|0}}function Jo(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:a,l:u}=ns(n[s],e);[t[s],r[s]]=[a,u]}return[t,r]}const Xo=(n,e)=>BigInt(n>>>0)<<Fn|BigInt(e>>>0),Zo=(n,e,t)=>n>>>t,Yo=(n,e,t)=>n<<32-t|e>>>t,Qo=(n,e,t)=>n>>>t|e<<32-t,ea=(n,e,t)=>n<<32-t|e>>>t,ta=(n,e,t)=>n<<64-t|e>>>t-32,ra=(n,e,t)=>n>>>t-32|e<<64-t,na=(n,e)=>e,ia=(n,e)=>n,sa=(n,e,t)=>n<<t|e>>>32-t,oa=(n,e,t)=>e<<t|n>>>32-t,aa=(n,e,t)=>e<<t-32|n>>>64-t,ca=(n,e,t)=>n<<t-32|e>>>64-t;function ua(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const la=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),fa=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,ha=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),da=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,pa=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),ga=(n,e,t,r,s,a)=>e+t+r+s+a+(n/2**32|0)|0,Y={fromBig:ns,split:Jo,toBig:Xo,shrSH:Zo,shrSL:Yo,rotrSH:Qo,rotrSL:ea,rotrBH:ta,rotrBL:ra,rotr32H:na,rotr32L:ia,rotlSH:sa,rotlSL:oa,rotlBH:aa,rotlBL:ca,add:ua,add3L:la,add3H:fa,add4L:ha,add4H:da,add5H:ga,add5L:pa},[ya,wa]=Y.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),dt=new Uint32Array(80),pt=new Uint32Array(80);class Gr extends rs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:a,Cl:u,Dh:c,Dl:h,Eh:p,El:g,Fh:w,Fl:E,Gh:m,Gl:x,Hh:B,Hl:S}=this;return[e,t,r,s,a,u,c,h,p,g,w,E,m,x,B,S]}set(e,t,r,s,a,u,c,h,p,g,w,E,m,x,B,S){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=a|0,this.Cl=u|0,this.Dh=c|0,this.Dl=h|0,this.Eh=p|0,this.El=g|0,this.Fh=w|0,this.Fl=E|0,this.Gh=m|0,this.Gl=x|0,this.Hh=B|0,this.Hl=S|0}process(e,t){for(let A=0;A<16;A++,t+=4)dt[A]=e.getUint32(t),pt[A]=e.getUint32(t+=4);for(let A=16;A<80;A++){const M=dt[A-15]|0,T=pt[A-15]|0,D=Y.rotrSH(M,T,1)^Y.rotrSH(M,T,8)^Y.shrSH(M,T,7),O=Y.rotrSL(M,T,1)^Y.rotrSL(M,T,8)^Y.shrSL(M,T,7),j=dt[A-2]|0,le=pt[A-2]|0,Ae=Y.rotrSH(j,le,19)^Y.rotrBH(j,le,61)^Y.shrSH(j,le,6),qe=Y.rotrSL(j,le,19)^Y.rotrBL(j,le,61)^Y.shrSL(j,le,6),Oe=Y.add4L(O,qe,pt[A-7],pt[A-16]),Ze=Y.add4H(Oe,D,Ae,dt[A-7],dt[A-16]);dt[A]=Ze|0,pt[A]=Oe|0}let{Ah:r,Al:s,Bh:a,Bl:u,Ch:c,Cl:h,Dh:p,Dl:g,Eh:w,El:E,Fh:m,Fl:x,Gh:B,Gl:S,Hh:R,Hl:I}=this;for(let A=0;A<80;A++){const M=Y.rotrSH(w,E,14)^Y.rotrSH(w,E,18)^Y.rotrBH(w,E,41),T=Y.rotrSL(w,E,14)^Y.rotrSL(w,E,18)^Y.rotrBL(w,E,41),D=w&m^~w&B,O=E&x^~E&S,j=Y.add5L(I,T,O,wa[A],pt[A]),le=Y.add5H(j,R,M,D,ya[A],dt[A]),Ae=j|0,qe=Y.rotrSH(r,s,28)^Y.rotrBH(r,s,34)^Y.rotrBH(r,s,39),Oe=Y.rotrSL(r,s,28)^Y.rotrBL(r,s,34)^Y.rotrBL(r,s,39),Ze=r&a^r&c^a&c,at=s&u^s&h^u&h;R=B|0,I=S|0,B=m|0,S=x|0,m=w|0,x=E|0,{h:w,l:E}=Y.add(p|0,g|0,le|0,Ae|0),p=c|0,g=h|0,c=a|0,h=u|0,a=r|0,u=s|0;const Ye=Y.add3L(Ae,Oe,at);r=Y.add3H(Ye,le,qe,Ze),s=Ye|0}({h:r,l:s}=Y.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:a,l:u}=Y.add(this.Bh|0,this.Bl|0,a|0,u|0),{h:c,l:h}=Y.add(this.Ch|0,this.Cl|0,c|0,h|0),{h:p,l:g}=Y.add(this.Dh|0,this.Dl|0,p|0,g|0),{h:w,l:E}=Y.add(this.Eh|0,this.El|0,w|0,E|0),{h:m,l:x}=Y.add(this.Fh|0,this.Fl|0,m|0,x|0),{h:B,l:S}=Y.add(this.Gh|0,this.Gl|0,B|0,S|0),{h:R,l:I}=Y.add(this.Hh|0,this.Hl|0,R|0,I|0),this.set(r,s,a,u,c,h,p,g,w,E,m,x,B,S,R,I)}roundClean(){dt.fill(0),pt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class ma extends Gr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class ba extends Gr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class xa extends Gr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ea=$t(()=>new Gr);$t(()=>new ma);$t(()=>new ba);$t(()=>new xa);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const ke=BigInt(0),se=BigInt(1),bt=BigInt(2),Sa=BigInt(8),Ei=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),he=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Ei,n:Ei,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),is=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),hr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const Ba=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),va=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ka=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Aa=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ie{constructor(e,t,r,s){this.x=e,this.y=t,this.z=r,this.t=s}static fromAffine(e){if(!(e instanceof ge))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(ge.ZERO)?ie.ZERO:new ie(e.x,e.y,se,C(e.x*e.y))}static toAffineBatch(e){const t=Ra(e.map(r=>r.z));return e.map((r,s)=>r.toAffine(t[s]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){Bi(e);const{x:t,y:r,z:s}=this,{x:a,y:u,z:c}=e,h=C(t*c),p=C(a*s),g=C(r*c),w=C(u*s);return h===p&&g===w}negate(){return new ie(C(-this.x),this.y,this.z,C(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:s}=he,a=C(e*e),u=C(t*t),c=C(bt*C(r*r)),h=C(s*a),p=e+t,g=C(C(p*p)-a-u),w=h+u,E=w-c,m=h-u,x=C(g*E),B=C(w*m),S=C(g*m),R=C(E*w);return new ie(x,B,R,S)}add(e){Bi(e);const{x:t,y:r,z:s,t:a}=this,{x:u,y:c,z:h,t:p}=e,g=C((r-t)*(c+u)),w=C((r+t)*(c-u)),E=C(w-g);if(E===ke)return this.double();const m=C(s*bt*p),x=C(a*bt*h),B=x+m,S=w+g,R=x-m,I=C(B*E),A=C(S*R),M=C(B*R),T=C(E*S);return new ie(I,A,T,M)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let s=this,a=s;for(let u=0;u<t;u++){a=s,r.push(a);for(let c=1;c<2**(e-1);c++)a=a.add(s),r.push(a);s=a.double()}return r}wNAF(e,t){!t&&this.equals(ie.BASE)&&(t=ge.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=t&&On.get(t);s||(s=this.precomputeWindow(r),t&&r!==1&&(s=ie.normalizeZ(s),On.set(t,s)));let a=ie.ZERO,u=ie.BASE;const c=1+256/r,h=2**(r-1),p=BigInt(2**r-1),g=2**r,w=BigInt(r);for(let E=0;E<c;E++){const m=E*h;let x=Number(e&p);e>>=w,x>h&&(x-=g,e+=se);const B=m,S=m+Math.abs(x)-1,R=E%2!==0,I=x<0;x===0?u=u.add(Si(R,s[B])):a=a.add(Si(I,s[S]))}return ie.normalizeZ([a,u])[0]}multiply(e,t){return this.wNAF(Fr(e,he.l),t)}multiplyUnsafe(e){let t=Fr(e,he.l,!1);const r=ie.BASE,s=ie.ZERO;if(t===ke)return s;if(this.equals(s)||t===se)return this;if(this.equals(r))return this.wNAF(t);let a=s,u=this;for(;t>ke;)t&se&&(a=a.add(u)),u=u.double(),t>>=se;return a}isSmallOrder(){return this.multiplyUnsafe(he.h).equals(ie.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(he.l/bt).double();return he.l%bt&&(e=e.add(this)),e.equals(ie.ZERO)}toAffine(e){const{x:t,y:r,z:s}=this,a=this.equals(ie.ZERO);e==null&&(e=a?Sa:Vr(s));const u=C(t*e),c=C(r*e),h=C(s*e);if(a)return ge.ZERO;if(h!==se)throw new Error("invZ was invalid");return new ge(u,c)}fromRistrettoBytes(){En()}toRistrettoBytes(){En()}fromRistrettoHash(){En()}}ie.BASE=new ie(he.Gx,he.Gy,se,C(he.Gx*he.Gy));ie.ZERO=new ie(ke,se,se,ke);function Si(n,e){const t=e.negate();return n?t:e}function Bi(n){if(!(n instanceof ie))throw new TypeError("ExtendedPoint expected")}function xn(n){if(!(n instanceof We))throw new TypeError("RistrettoPoint expected")}function En(){throw new Error("Legacy method: switch to RistrettoPoint")}class We{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=he,r=C(hr*e*e),s=C((r+se)*ka);let a=BigInt(-1);const u=C((a-t*r)*C(r+t));let{isValid:c,value:h}=Zn(s,u),p=C(h*e);mt(p)||(p=C(-p)),c||(h=p),c||(a=r);const g=C(a*(r-se)*Aa-u),w=h*h,E=C((h+h)*u),m=C(g*Ba),x=C(se-w),B=C(se+w);return new ie(C(E*B),C(x*m),C(m*B),C(E*x))}static hashToCurve(e){e=vt(e,64);const t=Sn(e.slice(0,32)),r=this.calcElligatorRistrettoMap(t),s=Sn(e.slice(32,64)),a=this.calcElligatorRistrettoMap(s);return new We(r.add(a))}static fromHex(e){e=vt(e,32);const{a:t,d:r}=he,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=Sn(e);if(!Ca(yr(a),e)||mt(a))throw new Error(s);const u=C(a*a),c=C(se+t*u),h=C(se-t*u),p=C(c*c),g=C(h*h),w=C(t*r*p-g),{isValid:E,value:m}=ki(C(w*g)),x=C(m*h),B=C(m*x*w);let S=C((a+a)*x);mt(S)&&(S=C(-S));const R=C(c*B),I=C(S*R);if(!E||mt(I)||R===ke)throw new Error(s);return new We(new ie(S,R,se,I))}toRawBytes(){let{x:e,y:t,z:r,t:s}=this.ep;const a=C(C(r+t)*C(r-t)),u=C(e*t),c=C(u*u),{value:h}=ki(C(a*c)),p=C(h*a),g=C(h*u),w=C(p*g*s);let E;if(mt(s*w)){let x=C(t*hr),B=C(e*hr);e=x,t=B,E=C(p*va)}else E=g;mt(e*w)&&(t=C(-t));let m=C((r-t)*E);return mt(m)&&(m=C(-m)),yr(m)}toHex(){return Er(this.toRawBytes())}toString(){return this.toHex()}equals(e){xn(e);const t=this.ep,r=e.ep,s=C(t.x*r.y)===C(t.y*r.x),a=C(t.y*r.y)===C(t.x*r.x);return s||a}add(e){return xn(e),new We(this.ep.add(e.ep))}subtract(e){return xn(e),new We(this.ep.subtract(e.ep))}multiply(e){return new We(this.ep.multiply(e))}multiplyUnsafe(e){return new We(this.ep.multiplyUnsafe(e))}}We.BASE=new We(ie.BASE);We.ZERO=new We(ie.ZERO);const On=new WeakMap;class ge{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,On.delete(this)}static fromHex(e,t=!0){const{d:r,P:s}=he;e=vt(e,32);const a=e.slice();a[31]=e[31]&-129;const u=Sr(a);if(t&&u>=s)throw new Error("Expected 0 < hex < P");if(!t&&u>=is)throw new Error("Expected 0 < hex < 2**256");const c=C(u*u),h=C(c-se),p=C(r*c+se);let{isValid:g,value:w}=Zn(h,p);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const E=(w&se)===se;return(e[31]&128)!==0!==E&&(w=C(-w)),new ge(w,u)}static async fromPrivateKey(e){return(await cs(e)).point}toRawBytes(){const e=yr(this.y);return e[31]|=this.x&se?128:0,e}toHex(){return Er(this.toRawBytes())}toX25519(){const{y:e}=this,t=C((se+e)*Vr(se-e));return yr(t)}isTorsionFree(){return ie.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ge(C(-this.x),this.y)}add(e){return ie.fromAffine(this).add(ie.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ie.fromAffine(this).multiply(e,this).toAffine()}}ge.BASE=new ge(he.Gx,he.Gy);ge.ZERO=new ge(ke,se);class gr{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=vt(e,64),r=ge.fromHex(t.slice(0,32),!1),s=Sr(t.slice(32,64));return new gr(r,s)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof ge))throw new Error("Expected Point instance");return Fr(t,he.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(yr(this.s),32),e}toHex(){return Er(this.toRawBytes())}}function vi(...n){if(!n.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(n.length===1)return n[0];const e=n.reduce((r,s)=>r+s.length,0),t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const a=n[r];t.set(a,s),s+=a.length}return t}const Ia=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Er(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Ia[n[t]];return e}function Xn(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){const r=t*2,s=n.slice(r,r+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[t]=a}return e}function ss(n){const t=n.toString(16).padStart(64,"0");return Xn(t)}function yr(n){return ss(n).reverse()}function mt(n){return(C(n)&se)===se}function Sr(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Er(Uint8Array.from(n).reverse()))}const _a=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Sn(n){return C(Sr(n)&_a)}function C(n,e=he.P){const t=n%e;return t>=ke?t:e+t}function Vr(n,e=he.P){if(n===ke||e<=ke)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=C(n,e),r=e,s=ke,a=se;for(;t!==ke;){const c=r/t,h=r%t,p=s-a*c;r=t,t=h,s=a,a=p}if(r!==se)throw new Error("invert: does not exist");return C(s,e)}function Ra(n,e=he.P){const t=new Array(n.length),r=n.reduce((a,u,c)=>u===ke?a:(t[c]=a,C(a*u,e)),se),s=Vr(r,e);return n.reduceRight((a,u,c)=>u===ke?a:(t[c]=C(a*t[c],e),C(a*u,e)),s),t}function et(n,e){const{P:t}=he;let r=n;for(;e-- >ke;)r*=r,r%=t;return r}function Ta(n){const{P:e}=he,t=BigInt(5),r=BigInt(10),s=BigInt(20),a=BigInt(40),u=BigInt(80),h=n*n%e*n%e,p=et(h,bt)*h%e,g=et(p,se)*n%e,w=et(g,t)*g%e,E=et(w,r)*w%e,m=et(E,s)*E%e,x=et(m,a)*m%e,B=et(x,u)*x%e,S=et(B,u)*x%e,R=et(S,r)*w%e;return{pow_p_5_8:et(R,bt)*n%e,b2:h}}function Zn(n,e){const t=C(e*e*e),r=C(t*t*e),s=Ta(n*r).pow_p_5_8;let a=C(n*t*s);const u=C(e*a*a),c=a,h=C(a*hr),p=u===n,g=u===C(-n),w=u===C(-n*hr);return p&&(a=c),(g||w)&&(a=h),mt(a)&&(a=C(-a)),{isValid:p||g,value:a}}function ki(n){return Zn(se,n)}function Lr(n){return C(Sr(n),he.l)}function Ca(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function vt(n,e){const t=n instanceof Uint8Array?Uint8Array.from(n):Xn(n);if(typeof e=="number"&&t.length!==e)throw new Error(`Expected ${e} bytes`);return t}function Fr(n,e,t=!0){if(!e)throw new TypeError("Specify max value");if(typeof n=="number"&&Number.isSafeInteger(n)&&(n=BigInt(n)),typeof n=="bigint"&&n<e){if(t){if(ke<n)return n}else if(ke<=n)return n}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Ua(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function os(n){if(n=typeof n=="bigint"||typeof n=="number"?ss(Fr(n,is)):vt(n),n.length!==32)throw new Error("Expected 32 bytes");return n}function as(n){const e=Ua(n.slice(0,32)),t=n.slice(32,64),r=Lr(e),s=ge.BASE.multiply(r),a=s.toRawBytes();return{head:e,prefix:t,scalar:r,point:s,pointBytes:a}}let dr;function Or(...n){if(typeof dr!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return dr(...n)}async function cs(n){return as(await Ft.sha512(os(n)))}function Yn(n){return as(Or(os(n)))}function Pa(n){return Yn(n).pointBytes}function La(n,e){n=vt(n);const{prefix:t,scalar:r,pointBytes:s}=Yn(e),a=Lr(Or(t,n)),u=ge.BASE.multiply(a),c=Lr(Or(u.toRawBytes(),s,n)),h=C(a+c*r,he.l);return new gr(u,h).toRawBytes()}function Fa(n,e,t){e=vt(e),t instanceof ge||(t=ge.fromHex(t,!1));const{r,s}=n instanceof gr?n.assertValidity():gr.fromHex(n),a=ie.BASE.multiplyUnsafe(s);return{r,s,SB:a,pub:t,msg:e}}function Oa(n,e,t,r){const s=Lr(r),a=ie.fromAffine(n).multiplyUnsafe(s);return ie.fromAffine(e).add(a).subtract(t).multiplyUnsafe(he.h).equals(ie.ZERO)}function Na(n,e,t){const{r,SB:s,msg:a,pub:u}=Fa(n,e,t),c=Or(r.toRawBytes(),u.toRawBytes(),a);return Oa(u,r,s,c)}const Qn={getExtendedPublicKey:Yn,getPublicKey:Pa,sign:La,verify:Na};ge.BASE._setWindowSize(8);const gt={node:vo,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Ft={bytesToHex:Er,hexToBytes:Xn,concatBytes:vi,getExtendedPublicKey:cs,mod:C,invert:Vr,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:n=>{if(n=vt(n),n.length<40||n.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return C(Sr(n),he.l-se)+se},randomBytes:(n=32)=>{if(gt.web)return gt.web.getRandomValues(new Uint8Array(n));if(gt.node){const{randomBytes:e}=gt.node;return new Uint8Array(e(n).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ft.randomBytes(32),sha512:async(...n)=>{const e=vi(...n);if(gt.web){const t=await gt.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}else{if(gt.node)return Uint8Array.from(gt.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(n=8,e=ge.BASE){const t=e.equals(ge.BASE)?e:new ge(e.x,e.y);return t._setWindowSize(n),t.multiply(bt),t},sha512Sync:void 0};Object.defineProperties(Ft,{sha512Sync:{configurable:!1,get(){return dr},set(n){dr||(dr=n)}}});const $a=(n,e,t)=>n&e^~n&t,Ma=(n,e,t)=>n&e^n&t^e&t,Da=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wt=new Uint32Array(64);class us extends rs{constructor(){super(64,32,8,!1),this.A=yt[0]|0,this.B=yt[1]|0,this.C=yt[2]|0,this.D=yt[3]|0,this.E=yt[4]|0,this.F=yt[5]|0,this.G=yt[6]|0,this.H=yt[7]|0}get(){const{A:e,B:t,C:r,D:s,E:a,F:u,G:c,H:h}=this;return[e,t,r,s,a,u,c,h]}set(e,t,r,s,a,u,c,h){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=a|0,this.F=u|0,this.G=c|0,this.H=h|0}process(e,t){for(let w=0;w<16;w++,t+=4)wt[w]=e.getUint32(t,!1);for(let w=16;w<64;w++){const E=wt[w-15],m=wt[w-2],x=Qe(E,7)^Qe(E,18)^E>>>3,B=Qe(m,17)^Qe(m,19)^m>>>10;wt[w]=B+wt[w-7]+x+wt[w-16]|0}let{A:r,B:s,C:a,D:u,E:c,F:h,G:p,H:g}=this;for(let w=0;w<64;w++){const E=Qe(c,6)^Qe(c,11)^Qe(c,25),m=g+E+$a(c,h,p)+Da[w]+wt[w]|0,B=(Qe(r,2)^Qe(r,13)^Qe(r,22))+Ma(r,s,a)|0;g=p,p=h,h=c,c=u+m|0,u=a,a=s,s=r,r=m+B|0}r=r+this.A|0,s=s+this.B|0,a=a+this.C|0,u=u+this.D|0,c=c+this.E|0,h=h+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(r,s,a,u,c,h,p,g)}roundClean(){wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ka extends us{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Nn=$t(()=>new us);$t(()=>new Ka);var ve={};function lt(n,e,t){return e<=n&&n<=t}function Jr(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function qa(n){for(var e=String(n),t=e.length,r=0,s=[];r<t;){var a=e.charCodeAt(r);if(a<55296||a>57343)s.push(a);else if(56320<=a&&a<=57343)s.push(65533);else if(55296<=a&&a<=56319)if(r===t-1)s.push(65533);else{var u=n.charCodeAt(r+1);if(56320<=u&&u<=57343){var c=a&1023,h=u&1023;s.push(65536+(c<<10)+h),r+=1}else s.push(65533)}r+=1}return s}function Ha(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Nr=-1;function ei(n){this.tokens=[].slice.call(n)}ei.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Nr},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Gt=-1;function Bn(n,e){if(n)throw TypeError("Decoder error");return e||65533}var $r="utf-8";function Mr(n,e){if(!(this instanceof Mr))return new Mr(n,e);if(n=n!==void 0?String(n).toLowerCase():$r,n!==$r)throw new Error("Encoding not supported. Only utf-8 is supported");e=Jr(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Mr.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=Jr(t),this._streaming||(this._decoder=new za({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new ei(r),a=[],u;!s.endOfStream()&&(u=this._decoder.handler(s,s.read()),u!==Gt);)u!==null&&(Array.isArray(u)?a.push.apply(a,u):a.push(u));if(!this._streaming){do{if(u=this._decoder.handler(s,s.read()),u===Gt)break;u!==null&&(Array.isArray(u)?a.push.apply(a,u):a.push(u))}while(!s.endOfStream());this._decoder=null}return a.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(a[0]===65279?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),Ha(a)}};function Dr(n,e){if(!(this instanceof Dr))return new Dr(n,e);if(n=n!==void 0?String(n).toLowerCase():$r,n!==$r)throw new Error("Encoding not supported. Only utf-8 is supported");e=Jr(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Dr.prototype={encode:function(e,t){e=e?String(e):"",t=Jr(t),this._streaming||(this._encoder=new ja(this._options)),this._streaming=!!t.stream;for(var r=[],s=new ei(qa(e)),a;!s.endOfStream()&&(a=this._encoder.handler(s,s.read()),a!==Gt);)Array.isArray(a)?r.push.apply(r,a):r.push(a);if(!this._streaming){for(;a=this._encoder.handler(s,s.read()),a!==Gt;)Array.isArray(a)?r.push.apply(r,a):r.push(a);this._encoder=null}return new Uint8Array(r)}};function za(n){var e=n.fatal,t=0,r=0,s=0,a=128,u=191;this.handler=function(c,h){if(h===Nr&&s!==0)return s=0,Bn(e);if(h===Nr)return Gt;if(s===0){if(lt(h,0,127))return h;if(lt(h,194,223))s=1,t=h-192;else if(lt(h,224,239))h===224&&(a=160),h===237&&(u=159),s=2,t=h-224;else if(lt(h,240,244))h===240&&(a=144),h===244&&(u=143),s=3,t=h-240;else return Bn(e);return t=t<<6*s,null}if(!lt(h,a,u))return t=s=r=0,a=128,u=191,c.prepend(h),Bn(e);if(a=128,u=191,r+=1,t+=h-128<<6*(s-r),r!==s)return null;var p=t;return t=s=r=0,p}}function ja(n){n.fatal,this.handler=function(e,t){if(t===Nr)return Gt;if(lt(t,0,127))return t;var r,s;lt(t,128,2047)?(r=1,s=192):lt(t,2048,65535)?(r=2,s=224):lt(t,65536,1114111)&&(r=3,s=240);for(var a=[(t>>6*r)+s];r>0;){var u=t>>6*(r-1);a.push(128|u&63),r-=1}return a}}const Wa=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Mr,TextEncoder:Dr},Symbol.toStringTag,{value:"Module"})),Ga=ht(Wa);var Va=nt&&nt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ja=nt&&nt.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),it=nt&&nt.__decorate||function(n,e,t,r){var s=arguments.length,a=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(a=(s<3?u(a):s>3?u(e,t,a):u(e,t))||a);return s>3&&a&&Object.defineProperty(e,t,a),a},Xa=nt&&nt.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&Va(e,n,t);return Ja(e,n),e},ls=nt&&nt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ve,"__esModule",{value:!0});var fs=ve.deserializeUnchecked=ws=ve.deserialize=ys=ve.serialize=ve.BinaryReader=ve.BinaryWriter=ve.BorshError=ve.baseDecode=ve.baseEncode=void 0;const Et=ls(ko),hs=ls(es),Za=Xa(Ga),Ya=typeof TextDecoder!="function"?Za.TextDecoder:TextDecoder,Qa=new Ya("utf-8",{fatal:!0});function ec(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),hs.default.encode(Buffer.from(n))}ve.baseEncode=ec;function tc(n){return Buffer.from(hs.default.decode(n))}ve.baseDecode=tc;const vn=1024;class Ce extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ve.BorshError=Ce;class ds{constructor(){this.buf=Buffer.alloc(vn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(vn)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Et.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Et.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Et.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Et.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(vn)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}ve.BinaryWriter=ds;function st(n,e,t){const r=t.value;t.value=function(...s){try{return r.apply(this,s)}catch(a){if(a instanceof RangeError){const u=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new Ce("Reached the end of buffer when deserializing")}throw a}}}class Ke{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Et.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Et.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Et.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Et.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ce(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return Qa.decode(t)}catch(r){throw new Ce(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let s=0;s<t;++s)r.push(e());return r}}it([st],Ke.prototype,"readU8",null);it([st],Ke.prototype,"readU16",null);it([st],Ke.prototype,"readU32",null);it([st],Ke.prototype,"readU64",null);it([st],Ke.prototype,"readU128",null);it([st],Ke.prototype,"readU256",null);it([st],Ke.prototype,"readU512",null);it([st],Ke.prototype,"readString",null);it([st],Ke.prototype,"readFixedArray",null);it([st],Ke.prototype,"readArray",null);ve.BinaryReader=Ke;function ps(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Ut(n,e,t,r,s){try{if(typeof r=="string")s[`write${ps(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new Ce(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new Ce(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let a=0;a<r[1];a++)Ut(n,null,t[a],r[0],s)}else s.writeArray(t,a=>{Ut(n,e,a,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),Ut(n,e,t,r.type,s));break}case"map":{s.writeU32(t.size),t.forEach((a,u)=>{Ut(n,e,u,r.key,s),Ut(n,e,a,r.value,s)});break}default:throw new Ce(`FieldType ${r} unrecognized`)}else gs(n,t,s)}catch(a){throw a instanceof Ce&&a.addToFieldPath(e),a}}function gs(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new Ce(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,a])=>{Ut(n,s,e[s],a,t)});else if(r.kind==="enum"){const s=e[r.field];for(let a=0;a<r.values.length;++a){const[u,c]=r.values[a];if(u===s){t.writeU8(a),Ut(n,u,e[u],c,t);break}}}else throw new Ce(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function rc(n,e,t=ds){const r=new t;return gs(n,e,r),r.toArray()}var ys=ve.serialize=rc;function Pt(n,e,t,r){try{if(typeof t=="string")return r[`read${ps(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let a=0;a<t[1];a++)s.push(Pt(n,null,t[0],r));return s}else return r.readArray(()=>Pt(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?Pt(n,e,t.type,r):void 0;if(t.kind==="map"){let s=new Map;const a=r.readU32();for(let u=0;u<a;u++){const c=Pt(n,e,t.key,r),h=Pt(n,e,t.value,r);s.set(c,h)}return s}return ti(n,t,r)}catch(s){throw s instanceof Ce&&s.addToFieldPath(e),s}}function ti(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new Ce(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[a,u]of n.get(e).fields)s[a]=Pt(n,a,u,t);return new e(s)}if(r.kind==="enum"){const s=t.readU8();if(s>=r.values.length)throw new Ce(`Enum index: ${s} is out of range`);const[a,u]=r.values[s],c=Pt(n,a,u,t);return new e({[a]:c})}throw new Ce(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function nc(n,e,t,r=Ke){const s=new r(t),a=ti(n,e,s);if(s.offset<t.length)throw new Ce(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return a}var ws=ve.deserialize=nc;function ic(n,e,t,r=Ke){const s=new r(t);return ti(n,e,s)}fs=ve.deserializeUnchecked=ic;var k={},ms={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Zi,t=Yi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=I,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const l=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(l,i),l.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(l){if(l>s)throw new RangeError('The value "'+l+'" is invalid for option "size"');const i=new Uint8Array(l);return Object.setPrototypeOf(i,c.prototype),i}function c(l,i,o){if(typeof l=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(l)}return h(l,i,o)}c.poolSize=8192;function h(l,i,o){if(typeof l=="string")return E(l,i);if(ArrayBuffer.isView(l))return x(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(we(l,ArrayBuffer)||l&&we(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(l,SharedArrayBuffer)||l&&we(l.buffer,SharedArrayBuffer)))return B(l,i,o);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=l.valueOf&&l.valueOf();if(f!=null&&f!==l)return c.from(f,i,o);const d=S(l);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return c.from(l[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}c.from=function(l,i,o){return h(l,i,o)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function p(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function g(l,i,o){return p(l),l<=0?u(l):i!==void 0?typeof o=="string"?u(l).fill(i,o):u(l).fill(i):u(l)}c.alloc=function(l,i,o){return g(l,i,o)};function w(l){return p(l),u(l<0?0:R(l)|0)}c.allocUnsafe=function(l){return w(l)},c.allocUnsafeSlow=function(l){return w(l)};function E(l,i){if((typeof i!="string"||i==="")&&(i="utf8"),!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const o=A(l,i)|0;let f=u(o);const d=f.write(l,i);return d!==o&&(f=f.slice(0,d)),f}function m(l){const i=l.length<0?0:R(l.length)|0,o=u(i);for(let f=0;f<i;f+=1)o[f]=l[f]&255;return o}function x(l){if(we(l,Uint8Array)){const i=new Uint8Array(l);return B(i.buffer,i.byteOffset,i.byteLength)}return m(l)}function B(l,i,o){if(i<0||l.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');let f;return i===void 0&&o===void 0?f=new Uint8Array(l):o===void 0?f=new Uint8Array(l,i):f=new Uint8Array(l,i,o),Object.setPrototypeOf(f,c.prototype),f}function S(l){if(c.isBuffer(l)){const i=R(l.length)|0,o=u(i);return o.length===0||l.copy(o,0,0,i),o}if(l.length!==void 0)return typeof l.length!="number"||Ct(l.length)?u(0):m(l);if(l.type==="Buffer"&&Array.isArray(l.data))return m(l.data)}function R(l){if(l>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return l|0}function I(l){return+l!=l&&(l=0),c.alloc(+l)}c.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==c.prototype},c.compare=function(i,o){if(we(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),we(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(i)||!c.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;let f=i.length,d=o.length;for(let y=0,b=Math.min(f,d);y<b;++y)if(i[y]!==o[y]){f=i[y],d=o[y];break}return f<d?-1:d<f?1:0},c.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return c.alloc(0);let f;if(o===void 0)for(o=0,f=0;f<i.length;++f)o+=i[f].length;const d=c.allocUnsafe(o);let y=0;for(f=0;f<i.length;++f){let b=i[f];if(we(b,Uint8Array))y+b.length>d.length?(c.isBuffer(b)||(b=c.from(b)),b.copy(d,y)):Uint8Array.prototype.set.call(d,b,y);else if(c.isBuffer(b))b.copy(d,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=b.length}return d};function A(l,i){if(c.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||we(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const o=l.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&o===0)return 0;let d=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return Tt(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return ar(l).length;default:if(d)return f?-1:Tt(l).length;i=(""+i).toLowerCase(),d=!0}}c.byteLength=A;function M(l,i,o){let f=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(l||(l="utf8");;)switch(l){case"hex":return ln(this,i,o);case"utf8":case"utf-8":return at(this,i,o);case"ascii":return cn(this,i,o);case"latin1":case"binary":return un(this,i,o);case"base64":return Ze(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fn(this,i,o);default:if(f)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),f=!0}}c.prototype._isBuffer=!0;function T(l,i,o){const f=l[i];l[i]=l[o],l[o]=f}c.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<i;o+=2)T(this,o,o+1);return this},c.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<i;o+=4)T(this,o,o+3),T(this,o+1,o+2);return this},c.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<i;o+=8)T(this,o,o+7),T(this,o+1,o+6),T(this,o+2,o+5),T(this,o+3,o+4);return this},c.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?at(this,0,i):M.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(i){if(!c.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:c.compare(this,i)===0},c.prototype.inspect=function(){let i="";const o=n.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(i,o,f,d,y){if(we(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(o===void 0&&(o=0),f===void 0&&(f=i?i.length:0),d===void 0&&(d=0),y===void 0&&(y=this.length),o<0||f>i.length||d<0||y>this.length)throw new RangeError("out of range index");if(d>=y&&o>=f)return 0;if(d>=y)return-1;if(o>=f)return 1;if(o>>>=0,f>>>=0,d>>>=0,y>>>=0,this===i)return 0;let b=y-d,F=f-o;const X=Math.min(b,F),V=this.slice(d,y),Z=i.slice(o,f);for(let z=0;z<X;++z)if(V[z]!==Z[z]){b=V[z],F=Z[z];break}return b<F?-1:F<b?1:0};function D(l,i,o,f,d){if(l.length===0)return-1;if(typeof o=="string"?(f=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,Ct(o)&&(o=d?0:l.length-1),o<0&&(o=l.length+o),o>=l.length){if(d)return-1;o=l.length-1}else if(o<0)if(d)o=0;else return-1;if(typeof i=="string"&&(i=c.from(i,f)),c.isBuffer(i))return i.length===0?-1:O(l,i,o,f,d);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(l,i,o):Uint8Array.prototype.lastIndexOf.call(l,i,o):O(l,[i],o,f,d);throw new TypeError("val must be string, number or Buffer")}function O(l,i,o,f,d){let y=1,b=l.length,F=i.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(l.length<2||i.length<2)return-1;y=2,b/=2,F/=2,o/=2}function X(Z,z){return y===1?Z[z]:Z.readUInt16BE(z*y)}let V;if(d){let Z=-1;for(V=o;V<b;V++)if(X(l,V)===X(i,Z===-1?0:V-Z)){if(Z===-1&&(Z=V),V-Z+1===F)return Z*y}else Z!==-1&&(V-=V-Z),Z=-1}else for(o+F>b&&(o=b-F),V=o;V>=0;V--){let Z=!0;for(let z=0;z<F;z++)if(X(l,V+z)!==X(i,z)){Z=!1;break}if(Z)return V}return-1}c.prototype.includes=function(i,o,f){return this.indexOf(i,o,f)!==-1},c.prototype.indexOf=function(i,o,f){return D(this,i,o,f,!0)},c.prototype.lastIndexOf=function(i,o,f){return D(this,i,o,f,!1)};function j(l,i,o,f){o=Number(o)||0;const d=l.length-o;f?(f=Number(f),f>d&&(f=d)):f=d;const y=i.length;f>y/2&&(f=y/2);let b;for(b=0;b<f;++b){const F=parseInt(i.substr(b*2,2),16);if(Ct(F))return b;l[o+b]=F}return b}function le(l,i,o,f){return ct(Tt(i,l.length-o),l,o,f)}function Ae(l,i,o,f){return ct(gn(i),l,o,f)}function qe(l,i,o,f){return ct(ar(i),l,o,f)}function Oe(l,i,o,f){return ct(yn(i,l.length-o),l,o,f)}c.prototype.write=function(i,o,f,d){if(o===void 0)d="utf8",f=this.length,o=0;else if(f===void 0&&typeof o=="string")d=o,f=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(f)?(f=f>>>0,d===void 0&&(d="utf8")):(d=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const y=this.length-o;if((f===void 0||f>y)&&(f=y),i.length>0&&(f<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let b=!1;for(;;)switch(d){case"hex":return j(this,i,o,f);case"utf8":case"utf-8":return le(this,i,o,f);case"ascii":case"latin1":case"binary":return Ae(this,i,o,f);case"base64":return qe(this,i,o,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,i,o,f);default:if(b)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),b=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ze(l,i,o){return i===0&&o===l.length?e.fromByteArray(l):e.fromByteArray(l.slice(i,o))}function at(l,i,o){o=Math.min(l.length,o);const f=[];let d=i;for(;d<o;){const y=l[d];let b=null,F=y>239?4:y>223?3:y>191?2:1;if(d+F<=o){let X,V,Z,z;switch(F){case 1:y<128&&(b=y);break;case 2:X=l[d+1],(X&192)===128&&(z=(y&31)<<6|X&63,z>127&&(b=z));break;case 3:X=l[d+1],V=l[d+2],(X&192)===128&&(V&192)===128&&(z=(y&15)<<12|(X&63)<<6|V&63,z>2047&&(z<55296||z>57343)&&(b=z));break;case 4:X=l[d+1],V=l[d+2],Z=l[d+3],(X&192)===128&&(V&192)===128&&(Z&192)===128&&(z=(y&15)<<18|(X&63)<<12|(V&63)<<6|Z&63,z>65535&&z<1114112&&(b=z))}}b===null?(b=65533,F=1):b>65535&&(b-=65536,f.push(b>>>10&1023|55296),b=56320|b&1023),f.push(b),d+=F}return an(f)}const Ye=4096;function an(l){const i=l.length;if(i<=Ye)return String.fromCharCode.apply(String,l);let o="",f=0;for(;f<i;)o+=String.fromCharCode.apply(String,l.slice(f,f+=Ye));return o}function cn(l,i,o){let f="";o=Math.min(l.length,o);for(let d=i;d<o;++d)f+=String.fromCharCode(l[d]&127);return f}function un(l,i,o){let f="";o=Math.min(l.length,o);for(let d=i;d<o;++d)f+=String.fromCharCode(l[d]);return f}function ln(l,i,o){const f=l.length;(!i||i<0)&&(i=0),(!o||o<0||o>f)&&(o=f);let d="";for(let y=i;y<o;++y)d+=wn[l[y]];return d}function fn(l,i,o){const f=l.slice(i,o);let d="";for(let y=0;y<f.length-1;y+=2)d+=String.fromCharCode(f[y]+f[y+1]*256);return d}c.prototype.slice=function(i,o){const f=this.length;i=~~i,o=o===void 0?f:~~o,i<0?(i+=f,i<0&&(i=0)):i>f&&(i=f),o<0?(o+=f,o<0&&(o=0)):o>f&&(o=f),o<i&&(o=i);const d=this.subarray(i,o);return Object.setPrototypeOf(d,c.prototype),d};function te(l,i,o){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+i>o)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i],y=1,b=0;for(;++b<o&&(y*=256);)d+=this[i+b]*y;return d},c.prototype.readUintBE=c.prototype.readUIntBE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i+--o],y=1;for(;o>0&&(y*=256);)d+=this[i+--o]*y;return d},c.prototype.readUint8=c.prototype.readUInt8=function(i,o){return i=i>>>0,o||te(i,1,this.length),this[i]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(i,o){return i=i>>>0,o||te(i,2,this.length),this[i]|this[i+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(i,o){return i=i>>>0,o||te(i,2,this.length),this[i]<<8|this[i+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(i,o){return i=i>>>0,o||te(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},c.prototype.readBigUInt64LE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,y=this[++i]+this[++i]*2**8+this[++i]*2**16+f*2**24;return BigInt(d)+(BigInt(y)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=o*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],y=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f;return(BigInt(d)<<BigInt(32))+BigInt(y)}),c.prototype.readIntLE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=this[i],y=1,b=0;for(;++b<o&&(y*=256);)d+=this[i+b]*y;return y*=128,d>=y&&(d-=Math.pow(2,8*o)),d},c.prototype.readIntBE=function(i,o,f){i=i>>>0,o=o>>>0,f||te(i,o,this.length);let d=o,y=1,b=this[i+--d];for(;d>0&&(y*=256);)b+=this[i+--d]*y;return y*=128,b>=y&&(b-=Math.pow(2,8*o)),b},c.prototype.readInt8=function(i,o){return i=i>>>0,o||te(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},c.prototype.readInt16LE=function(i,o){i=i>>>0,o||te(i,2,this.length);const f=this[i]|this[i+1]<<8;return f&32768?f|4294901760:f},c.prototype.readInt16BE=function(i,o){i=i>>>0,o||te(i,2,this.length);const f=this[i+1]|this[i]<<8;return f&32768?f|4294901760:f},c.prototype.readInt32LE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},c.prototype.readInt32BE=function(i,o){return i=i>>>0,o||te(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},c.prototype.readBigInt64LE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(f<<24);return(BigInt(d)<<BigInt(32))+BigInt(o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),c.prototype.readBigInt64BE=Ee(function(i){i=i>>>0,$e(i,"offset");const o=this[i],f=this[i+7];(o===void 0||f===void 0)&&Ve(i,this.length-8);const d=(o<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(d)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+f)}),c.prototype.readFloatLE=function(i,o){return i=i>>>0,o||te(i,4,this.length),t.read(this,i,!0,23,4)},c.prototype.readFloatBE=function(i,o){return i=i>>>0,o||te(i,4,this.length),t.read(this,i,!1,23,4)},c.prototype.readDoubleLE=function(i,o){return i=i>>>0,o||te(i,8,this.length),t.read(this,i,!0,52,8)},c.prototype.readDoubleBE=function(i,o){return i=i>>>0,o||te(i,8,this.length),t.read(this,i,!1,52,8)};function ce(l,i,o,f,d,y){if(!c.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>d||i<y)throw new RangeError('"value" argument is out of bounds');if(o+f>l.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(i,o,f,d){if(i=+i,o=o>>>0,f=f>>>0,!d){const F=Math.pow(2,8*f)-1;ce(this,i,o,f,F,0)}let y=1,b=0;for(this[o]=i&255;++b<f&&(y*=256);)this[o+b]=i/y&255;return o+f},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(i,o,f,d){if(i=+i,o=o>>>0,f=f>>>0,!d){const F=Math.pow(2,8*f)-1;ce(this,i,o,f,F,0)}let y=f-1,b=1;for(this[o+y]=i&255;--y>=0&&(b*=256);)this[o+y]=i/b&255;return o+f},c.prototype.writeUint8=c.prototype.writeUInt8=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,1,255,0),this[o]=i&255,o+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,65535,0),this[o]=i&255,this[o+1]=i>>>8,o+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=i&255,o+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255,o+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4};function er(l,i,o,f,d){or(i,f,d,l,o,7);let y=Number(i&BigInt(4294967295));l[o++]=y,y=y>>8,l[o++]=y,y=y>>8,l[o++]=y,y=y>>8,l[o++]=y;let b=Number(i>>BigInt(32)&BigInt(4294967295));return l[o++]=b,b=b>>8,l[o++]=b,b=b>>8,l[o++]=b,b=b>>8,l[o++]=b,o}function tr(l,i,o,f,d){or(i,f,d,l,o,7);let y=Number(i&BigInt(4294967295));l[o+7]=y,y=y>>8,l[o+6]=y,y=y>>8,l[o+5]=y,y=y>>8,l[o+4]=y;let b=Number(i>>BigInt(32)&BigInt(4294967295));return l[o+3]=b,b=b>>8,l[o+2]=b,b=b>>8,l[o+1]=b,b=b>>8,l[o]=b,o+8}c.prototype.writeBigUInt64LE=Ee(function(i,o=0){return er(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ee(function(i,o=0){return tr(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(i,o,f,d){if(i=+i,o=o>>>0,!d){const X=Math.pow(2,8*f-1);ce(this,i,o,f,X-1,-X)}let y=0,b=1,F=0;for(this[o]=i&255;++y<f&&(b*=256);)i<0&&F===0&&this[o+y-1]!==0&&(F=1),this[o+y]=(i/b>>0)-F&255;return o+f},c.prototype.writeIntBE=function(i,o,f,d){if(i=+i,o=o>>>0,!d){const X=Math.pow(2,8*f-1);ce(this,i,o,f,X-1,-X)}let y=f-1,b=1,F=0;for(this[o+y]=i&255;--y>=0&&(b*=256);)i<0&&F===0&&this[o+y+1]!==0&&(F=1),this[o+y]=(i/b>>0)-F&255;return o+f},c.prototype.writeInt8=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=i&255,o+1},c.prototype.writeInt16LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,32767,-32768),this[o]=i&255,this[o+1]=i>>>8,o+2},c.prototype.writeInt16BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=i&255,o+2},c.prototype.writeInt32LE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,2147483647,-2147483648),this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},c.prototype.writeInt32BE=function(i,o,f){return i=+i,o=o>>>0,f||ce(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4},c.prototype.writeBigInt64LE=Ee(function(i,o=0){return er(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ee(function(i,o=0){return tr(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rr(l,i,o,f,d,y){if(o+f>l.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function nr(l,i,o,f,d){return i=+i,o=o>>>0,d||rr(l,i,o,4),t.write(l,i,o,f,23,4),o+4}c.prototype.writeFloatLE=function(i,o,f){return nr(this,i,o,!0,f)},c.prototype.writeFloatBE=function(i,o,f){return nr(this,i,o,!1,f)};function ir(l,i,o,f,d){return i=+i,o=o>>>0,d||rr(l,i,o,8),t.write(l,i,o,f,52,8),o+8}c.prototype.writeDoubleLE=function(i,o,f){return ir(this,i,o,!0,f)},c.prototype.writeDoubleBE=function(i,o,f){return ir(this,i,o,!1,f)},c.prototype.copy=function(i,o,f,d){if(!c.isBuffer(i))throw new TypeError("argument should be a Buffer");if(f||(f=0),!d&&d!==0&&(d=this.length),o>=i.length&&(o=i.length),o||(o=0),d>0&&d<f&&(d=f),d===f||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),i.length-o<d-f&&(d=i.length-o+f);const y=d-f;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,f,d):Uint8Array.prototype.set.call(i,this.subarray(f,d),o),y},c.prototype.fill=function(i,o,f,d){if(typeof i=="string"){if(typeof o=="string"?(d=o,o=0,f=this.length):typeof f=="string"&&(d=f,f=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!c.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(i.length===1){const b=i.charCodeAt(0);(d==="utf8"&&b<128||d==="latin1")&&(i=b)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(o<0||this.length<o||this.length<f)throw new RangeError("Out of range index");if(f<=o)return this;o=o>>>0,f=f===void 0?this.length:f>>>0,i||(i=0);let y;if(typeof i=="number")for(y=o;y<f;++y)this[y]=i;else{const b=c.isBuffer(i)?i:c.from(i,d),F=b.length;if(F===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(y=0;y<f-o;++y)this[y+o]=b[y%F]}return this};const Ne={};function Rt(l,i,o){Ne[l]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}Rt("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Rt("ERR_INVALID_ARG_TYPE",function(l,i){return`The "${l}" argument must be of type number. Received type ${typeof i}`},TypeError),Rt("ERR_OUT_OF_RANGE",function(l,i,o){let f=`The value of "${l}" is out of range.`,d=o;return Number.isInteger(o)&&Math.abs(o)>2**32?d=sr(String(o)):typeof o=="bigint"&&(d=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(d=sr(d)),d+="n"),f+=` It must be ${i}. Received ${d}`,f},RangeError);function sr(l){let i="",o=l.length;const f=l[0]==="-"?1:0;for(;o>=f+4;o-=3)i=`_${l.slice(o-3,o)}${i}`;return`${l.slice(0,o)}${i}`}function hn(l,i,o){$e(i,"offset"),(l[i]===void 0||l[i+o]===void 0)&&Ve(i,l.length-(o+1))}function or(l,i,o,f,d,y){if(l>o||l<i){const b=typeof i=="bigint"?"n":"";let F;throw y>3?i===0||i===BigInt(0)?F=`>= 0${b} and < 2${b} ** ${(y+1)*8}${b}`:F=`>= -(2${b} ** ${(y+1)*8-1}${b}) and < 2 ** ${(y+1)*8-1}${b}`:F=`>= ${i}${b} and <= ${o}${b}`,new Ne.ERR_OUT_OF_RANGE("value",F,l)}hn(f,d,y)}function $e(l,i){if(typeof l!="number")throw new Ne.ERR_INVALID_ARG_TYPE(i,"number",l)}function Ve(l,i,o){throw Math.floor(l)!==l?($e(l,o),new Ne.ERR_OUT_OF_RANGE(o||"offset","an integer",l)):i<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${i}`,l)}const dn=/[^+/0-9A-Za-z-_]/g;function pn(l){if(l=l.split("=")[0],l=l.trim().replace(dn,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function Tt(l,i){i=i||1/0;let o;const f=l.length;let d=null;const y=[];for(let b=0;b<f;++b){if(o=l.charCodeAt(b),o>55295&&o<57344){if(!d){if(o>56319){(i-=3)>-1&&y.push(239,191,189);continue}else if(b+1===f){(i-=3)>-1&&y.push(239,191,189);continue}d=o;continue}if(o<56320){(i-=3)>-1&&y.push(239,191,189),d=o;continue}o=(d-55296<<10|o-56320)+65536}else d&&(i-=3)>-1&&y.push(239,191,189);if(d=null,o<128){if((i-=1)<0)break;y.push(o)}else if(o<2048){if((i-=2)<0)break;y.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;y.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;y.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return y}function gn(l){const i=[];for(let o=0;o<l.length;++o)i.push(l.charCodeAt(o)&255);return i}function yn(l,i){let o,f,d;const y=[];for(let b=0;b<l.length&&!((i-=2)<0);++b)o=l.charCodeAt(b),f=o>>8,d=o%256,y.push(d),y.push(f);return y}function ar(l){return e.toByteArray(pn(l))}function ct(l,i,o,f){let d;for(d=0;d<f&&!(d+o>=i.length||d>=l.length);++d)i[d+o]=l[d];return d}function we(l,i){return l instanceof i||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===i.name}function Ct(l){return l!==l}const wn=function(){const l="0123456789abcdef",i=new Array(256);for(let o=0;o<16;++o){const f=o*16;for(let d=0;d<16;++d)i[f+d]=l[o]+l[d]}return i}();function Ee(l){return typeof BigInt>"u"?mn:l}function mn(){throw new Error("BigInt not supported")}})(ms);Object.defineProperty(k,"__esModule",{value:!0});k.s16=k.s8=k.nu64be=k.u48be=k.u40be=k.u32be=k.u24be=k.u16be=Be=k.nu64=k.u48=k.u40=W=k.u32=k.u24=He=k.u16=ae=k.u8=Lt=k.offset=k.greedy=k.Constant=k.UTF8=k.CString=k.Blob=k.Boolean=k.BitField=k.BitStructure=k.VariantLayout=k.Union=k.UnionLayoutDiscriminator=k.UnionDiscriminator=k.Structure=k.Sequence=k.DoubleBE=k.Double=k.FloatBE=k.Float=k.NearInt64BE=k.NearInt64=k.NearUInt64BE=k.NearUInt64=k.IntBE=k.Int=k.UIntBE=k.UInt=k.OffsetLayout=k.GreedyCount=k.ExternalLayout=k.bindConstructorLayout=k.nameWithProperty=k.Layout=k.uint8ArrayToBuffer=k.checkUint8Array=void 0;k.constant=k.utf8=k.cstr=ye=k.blob=k.unionLayoutDiscriminator=k.union=Ue=k.seq=k.bits=q=k.struct=k.f64be=k.f64=k.f32be=k.f32=k.ns64be=k.s48be=k.s40be=k.s32be=k.s24be=k.s16be=Me=k.ns64=k.s48=k.s40=k.s32=k.s24=void 0;const ri=ms;function Zt(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}k.checkUint8Array=Zt;function oe(n){return Zt(n),ri.Buffer.from(n.buffer,n.byteOffset,n.length)}k.uint8ArrayToBuffer=oe;class ue{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}k.Layout=ue;function ni(n,e){return e.property?n+"["+e.property+"]":n}k.nameWithProperty=ni;function sc(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof ue))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}k.bindConstructorLayout=sc;class Pe extends ue{isCount(){throw new Error("ExternalLayout is abstract")}}k.ExternalLayout=Pe;class bs extends Pe{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Zt(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}k.GreedyCount=bs;class ii extends Pe{constructor(e,t=0,r){if(!(e instanceof ue))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ge||this.layout instanceof Je}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}k.OffsetLayout=ii;class Ge extends ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return oe(e).readUIntLE(t,this.span)}encode(e,t,r=0){return oe(t).writeUIntLE(e,r,this.span),this.span}}k.UInt=Ge;class Je extends ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return oe(e).readUIntBE(t,this.span)}encode(e,t,r=0){return oe(t).writeUIntBE(e,r,this.span),this.span}}k.UIntBE=Je;class Mt extends ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return oe(e).readIntLE(t,this.span)}encode(e,t,r=0){return oe(t).writeIntLE(e,r,this.span),this.span}}k.Int=Mt;class Yt extends ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return oe(e).readIntBE(t,this.span)}encode(e,t,r=0){return oe(t).writeIntBE(e,r,this.span),this.span}}k.IntBE=Yt;const $n=Math.pow(2,32);function Xr(n){const e=Math.floor(n/$n),t=n-e*$n;return{hi32:e,lo32:t}}function Zr(n,e){return n*$n+e}class xs extends ue{constructor(e){super(8,e)}decode(e,t=0){const r=oe(e),s=r.readUInt32LE(t),a=r.readUInt32LE(t+4);return Zr(a,s)}encode(e,t,r=0){const s=Xr(e),a=oe(t);return a.writeUInt32LE(s.lo32,r),a.writeUInt32LE(s.hi32,r+4),8}}k.NearUInt64=xs;class Es extends ue{constructor(e){super(8,e)}decode(e,t=0){const r=oe(e),s=r.readUInt32BE(t),a=r.readUInt32BE(t+4);return Zr(s,a)}encode(e,t,r=0){const s=Xr(e),a=oe(t);return a.writeUInt32BE(s.hi32,r),a.writeUInt32BE(s.lo32,r+4),8}}k.NearUInt64BE=Es;class Ss extends ue{constructor(e){super(8,e)}decode(e,t=0){const r=oe(e),s=r.readUInt32LE(t),a=r.readInt32LE(t+4);return Zr(a,s)}encode(e,t,r=0){const s=Xr(e),a=oe(t);return a.writeUInt32LE(s.lo32,r),a.writeInt32LE(s.hi32,r+4),8}}k.NearInt64=Ss;class Bs extends ue{constructor(e){super(8,e)}decode(e,t=0){const r=oe(e),s=r.readInt32BE(t),a=r.readUInt32BE(t+4);return Zr(s,a)}encode(e,t,r=0){const s=Xr(e),a=oe(t);return a.writeInt32BE(s.hi32,r),a.writeUInt32BE(s.lo32,r+4),8}}k.NearInt64BE=Bs;class vs extends ue{constructor(e){super(4,e)}decode(e,t=0){return oe(e).readFloatLE(t)}encode(e,t,r=0){return oe(t).writeFloatLE(e,r),4}}k.Float=vs;class ks extends ue{constructor(e){super(4,e)}decode(e,t=0){return oe(e).readFloatBE(t)}encode(e,t,r=0){return oe(t).writeFloatBE(e,r),4}}k.FloatBE=ks;class As extends ue{constructor(e){super(8,e)}decode(e,t=0){return oe(e).readDoubleLE(t)}encode(e,t,r=0){return oe(t).writeDoubleLE(e,r),8}}k.Double=As;class Is extends ue{constructor(e){super(8,e)}decode(e,t=0){return oe(e).readDoubleBE(t)}encode(e,t,r=0){return oe(t).writeDoubleBE(e,r),8}}k.DoubleBE=Is;class _s extends ue{constructor(e,t,r){if(!(e instanceof ue))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Pe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof Pe)&&0<e.span&&(s=t*e.span),super(s,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Pe&&(s=s.decode(e,t)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let a=0;for(;a<s;)r+=this.elementLayout.getSpan(e,t+r),++a}return r}decode(e,t=0){const r=[];let s=0,a=this.count;for(a instanceof Pe&&(a=a.decode(e,t));s<a;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return r}encode(e,t,r=0){const s=this.elementLayout,a=e.reduce((u,c)=>u+s.encode(c,t,r+u),0);return this.count instanceof Pe&&this.count.encode(e.length,t,r),a}}k.Sequence=_s;class Rs extends ue{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((a,u)=>a&&u instanceof ue,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const a of e)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((a,u)=>a+u.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,a)=>{const u=a.getSpan(e,t);return t+=u,s+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Zt(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const s=r;let a=0,u=0;for(const c of this.fields){let h=c.span;if(u=0<h?h:0,c.property!==void 0){const p=e[c.property];p!==void 0&&(u=c.encode(p,t,r),0>h&&(h=c.getSpan(t,r)))}a=r,r+=h}return a+u-s}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}k.Structure=Rs;class si{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}k.UnionDiscriminator=si;class Kr extends si{constructor(e,t){if(!(e instanceof Pe&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}k.UnionLayoutDiscriminator=Kr;class oi extends ue{constructor(e,t,r){let s;if(e instanceof Ge||e instanceof Je)s=new Kr(new ii(e));else if(e instanceof Pe&&e.isCount())s=new Kr(e);else if(e instanceof si)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof ue))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let a=-1;t&&(a=t.span,0<=a&&(e instanceof Ge||e instanceof Je)&&(a+=s.layout.span)),super(a,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Ge||e instanceof Je,this.defaultLayout=t,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return u(c)},this.configGetSourceVariant=function(c){u=c.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const s=this.discriminator,a=s.decode(e,t),u=this.registry[a];if(u===void 0){const c=this.defaultLayout;let h=0;this.usesPrefixDiscriminator&&(h=s.layout.span),r=this.makeDestinationObject(),r[s.property]=a,r[c.property]=c.decode(e,t+h)}else r=u.decode(e,t);return r}encode(e,t,r=0){const s=this.getSourceVariant(e);if(s===void 0){const a=this.discriminator,u=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=a.layout.span),a.encode(e[a.property],t,r),c+u.encode(e[u.property],t,r+c)}return s.encode(e,t,r)}addVariant(e,t,r){const s=new Ts(this,e,t,r);return this.registry[e]=s,s}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}k.Union=oi;class Ts extends ue{constructor(e,t,r,s){if(!(e instanceof oi))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof ue))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let a=e.span;0>e.span&&(a=r?r.span:0,0<=a&&e.usesPrefixDiscriminator&&(a+=e.discriminator.layout.span)),super(a,s),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+r)),r+s}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let a=s;if(this.layout&&(this.layout.encode(e[this.property],t,r+s),a+=this.layout.getSpan(t,r+s),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}k.VariantLayout=Ts;function Ht(n){return 0>n&&(n+=4294967296),n}class ai extends ue{constructor(e,t,r){if(!(e instanceof Ge||e instanceof Je))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(a){return s=Ht(a),this},this._packedGetValue=function(){return s}}decode(e,t=0){const r=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const a of this.fields)a.property!==void 0&&(r[a.property]=a.decode(e));return r}encode(e,t,r=0){const s=this.word.decode(t,r);this._packedSetValue(s);for(const a of this.fields)if(a.property!==void 0){const u=e[a.property];u!==void 0&&a.encode(u)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new ci(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Cs(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}k.BitStructure=ai;class ci{constructor(e,t,r){if(!(e instanceof ai))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,a=e.fields.reduce((u,c)=>u+c.bits,0);if(t+a>s)throw new Error("bits too long for span remainder ("+(s-a)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=a,this.container.msb&&(this.start=s-a-t),this.wordMask=Ht(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return Ht(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Ht(e&this.valueMask))throw new TypeError(ni("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=Ht(e<<this.start);this.container._packedSetValue(Ht(t&~this.wordMask)|r)}}k.BitField=ci;let Cs=class extends ci{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};k.Boolean=Cs;class Us extends ue{constructor(e,t){if(!(e instanceof Pe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Pe||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),oe(e).slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof Pe&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(ni("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>t.length)throw new RangeError("encoding overruns Uint8Array");const a=oe(e);return oe(t).write(a.toString("hex"),r,s,"hex"),this.length instanceof Pe&&this.length.encode(s,t,r),s}}k.Blob=Us;class Ps extends ue{constructor(e){super(-1,e)}getSpan(e,t=0){Zt(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return oe(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=ri.Buffer.from(e,"utf8"),a=s.length;if(r+a>t.length)throw new RangeError("encoding overruns Buffer");const u=oe(t);return s.copy(u,r),u[r+a]=0,a+1}}k.CString=Ps;class Ls extends ue{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Zt(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return oe(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=ri.Buffer.from(e,"utf8"),a=s.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(r+a>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(oe(t),r),a}}k.UTF8=Ls;class Fs extends ue{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}k.Constant=Fs;k.greedy=(n,e)=>new bs(n,e);var Lt=k.offset=(n,e,t)=>new ii(n,e,t),ae=k.u8=n=>new Ge(1,n),He=k.u16=n=>new Ge(2,n);k.u24=n=>new Ge(3,n);var W=k.u32=n=>new Ge(4,n);k.u40=n=>new Ge(5,n);k.u48=n=>new Ge(6,n);var Be=k.nu64=n=>new xs(n);k.u16be=n=>new Je(2,n);k.u24be=n=>new Je(3,n);k.u32be=n=>new Je(4,n);k.u40be=n=>new Je(5,n);k.u48be=n=>new Je(6,n);k.nu64be=n=>new Es(n);k.s8=n=>new Mt(1,n);k.s16=n=>new Mt(2,n);k.s24=n=>new Mt(3,n);k.s32=n=>new Mt(4,n);k.s40=n=>new Mt(5,n);k.s48=n=>new Mt(6,n);var Me=k.ns64=n=>new Ss(n);k.s16be=n=>new Yt(2,n);k.s24be=n=>new Yt(3,n);k.s32be=n=>new Yt(4,n);k.s40be=n=>new Yt(5,n);k.s48be=n=>new Yt(6,n);k.ns64be=n=>new Bs(n);k.f32=n=>new vs(n);k.f32be=n=>new ks(n);k.f64=n=>new As(n);k.f64be=n=>new Is(n);var q=k.struct=(n,e,t)=>new Rs(n,e,t);k.bits=(n,e,t)=>new ai(n,e,t);var Ue=k.seq=(n,e,t)=>new _s(n,e,t);k.union=(n,e,t)=>new oi(n,e,t);k.unionLayoutDiscriminator=(n,e)=>new Kr(n,e);var ye=k.blob=(n,e)=>new Us(n,e);k.cstr=n=>new Ps(n);k.utf8=(n,e)=>new Ls(n,e);k.constant=(n,e)=>new Fs(n,e);var Br={};Object.defineProperty(Br,"__esModule",{value:!0});function oc(n){{const e=Buffer.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var ac=Br.toBigIntLE=oc;function cc(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}Br.toBigIntBE=cc;function uc(n,e){{const t=n.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var lc=Br.toBufferLE=uc;function fc(n,e){{const t=n.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}Br.toBufferBE=fc;class hc extends TypeError{constructor(e,t){let r;const{message:s,...a}=e,{path:u}=e,c=u.length===0?s:"At path: "+u.join(".")+" -- "+s;super(c),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var h;return(h=r)!=null?h:r=[e,...t()]}}}function dc(n){return Bt(n)&&typeof n[Symbol.iterator]=="function"}function Bt(n){return typeof n=="object"&&n!=null}function Xe(n){return typeof n=="string"?JSON.stringify(n):""+n}function pc(n){const{done:e,value:t}=n.next();return e?void 0:t}function gc(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:a}=e,{type:u}=t,{refinement:c,message:h="Expected a value of type `"+u+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+Xe(r)+"`"}=n;return{value:r,type:u,refinement:c,key:s[s.length-1],path:s,branch:a,...n,message:h}}function*Ai(n,e,t,r){dc(n)||(n=[n]);for(const s of n){const a=gc(s,e,t,r);a&&(yield a)}}function*ui(n,e,t={}){const{path:r=[],branch:s=[n],coerce:a=!1,mask:u=!1}=t,c={path:r,branch:s};if(a&&(n=e.coercer(n,c),u&&e.type!=="type"&&Bt(e.schema)&&Bt(n)&&!Array.isArray(n)))for(const p in n)e.schema[p]===void 0&&delete n[p];let h=!0;for(const p of e.validator(n,c))h=!1,yield[p,void 0];for(let[p,g,w]of e.entries(n,c)){const E=ui(g,w,{path:p===void 0?r:[...r,p],branch:p===void 0?s:[...s,g],coerce:a,mask:u});for(const m of E)m[0]?(h=!1,yield[m[0],void 0]):a&&(g=m[1],p===void 0?n=g:n instanceof Map?n.set(p,g):n instanceof Set?n.add(g):Bt(n)&&(n[p]=g))}if(h)for(const p of e.refiner(n,c))h=!1,yield[p,void 0];h&&(yield[void 0,n])}let ot=class{constructor(e){const{type:t,schema:r,validator:s,refiner:a,coercer:u=h=>h,entries:c=function*(){}}=e;this.type=t,this.schema=r,this.entries=c,this.coercer=u,s?this.validator=(h,p)=>{const g=s(h,p);return Ai(g,p,this,h)}:this.validator=()=>[],a?this.refiner=(h,p)=>{const g=a(h,p);return Ai(g,p,this,h)}:this.refiner=()=>[]}assert(e){return yc(e,this)}create(e){return L(e,this)}is(e){return Os(e,this)}mask(e){return wc(e,this)}validate(e,t={}){return vr(e,this,t)}};function yc(n,e){const t=vr(n,e);if(t[0])throw t[0]}function L(n,e){const t=vr(n,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function wc(n,e){const t=vr(n,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function Os(n,e){return!vr(n,e)[0]}function vr(n,e,t={}){const r=ui(n,e,t),s=pc(r);return s[0]?[new hc(s[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,s[1]]}function Dt(n,e){return new ot({type:n,schema:null,validator:e})}function mc(){return Dt("any",()=>!0)}function N(n){return new ot({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+Xe(e)}})}function ft(){return Dt("boolean",n=>typeof n=="boolean")}function li(n){return Dt("instance",e=>e instanceof n||"Expected a `"+n.name+"` instance, but received: "+Xe(e))}function pe(n){const e=Xe(n),t=typeof n;return new ot({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+e+"`, but received: "+Xe(r)}})}function bc(){return Dt("never",()=>!1)}function $(n){return new ot({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function v(){return Dt("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Xe(n))}function J(n){return new ot({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Ns(n,e){return new ot({type:"record",schema:null,*entries(t){if(Bt(t))for(const r in t){const s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return Bt(t)||"Expected an object, but received: "+Xe(t)}})}function P(){return Dt("string",n=>typeof n=="string"||"Expected a string, but received: "+Xe(n))}function fi(n){const e=bc();return new ot({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||"Expected an array, but received: "+Xe(t)}})}function U(n){const e=Object.keys(n);return new ot({type:"type",schema:n,*entries(t){if(Bt(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return Bt(t)||"Expected an object, but received: "+Xe(t)}})}function Fe(n){const e=n.map(t=>t.type).join(" | ");return new ot({type:"union",schema:null,validator(t,r){const s=[];for(const a of n){const[...u]=ui(t,a,r),[c]=u;if(c[0])for(const[h]of u)h&&s.push(h);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Xe(t),...s]}})}function kr(){return Dt("unknown",()=>!0)}function Ar(n,e,t){return new ot({...n,coercer:(r,s)=>Os(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Rr,xc=new Uint8Array(16);function $s(){if(!Rr&&(Rr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Rr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rr(xc)}const Ec=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Yr(n){return typeof n=="string"&&Ec.test(n)}var Se=[];for(var kn=0;kn<256;++kn)Se.push((kn+256).toString(16).substr(1));function Qr(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Se[n[e+0]]+Se[n[e+1]]+Se[n[e+2]]+Se[n[e+3]]+"-"+Se[n[e+4]]+Se[n[e+5]]+"-"+Se[n[e+6]]+Se[n[e+7]]+"-"+Se[n[e+8]]+Se[n[e+9]]+"-"+Se[n[e+10]]+Se[n[e+11]]+Se[n[e+12]]+Se[n[e+13]]+Se[n[e+14]]+Se[n[e+15]]).toLowerCase();if(!Yr(t))throw TypeError("Stringified UUID is invalid");return t}var Ii,An,In=0,_n=0;function Sc(n,e,t){var r=e&&t||0,s=e||new Array(16);n=n||{};var a=n.node||Ii,u=n.clockseq!==void 0?n.clockseq:An;if(a==null||u==null){var c=n.random||(n.rng||$s)();a==null&&(a=Ii=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),u==null&&(u=An=(c[6]<<8|c[7])&16383)}var h=n.msecs!==void 0?n.msecs:Date.now(),p=n.nsecs!==void 0?n.nsecs:_n+1,g=h-In+(p-_n)/1e4;if(g<0&&n.clockseq===void 0&&(u=u+1&16383),(g<0||h>In)&&n.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");In=h,_n=p,An=u,h+=122192928e5;var w=((h&268435455)*1e4+p)%4294967296;s[r++]=w>>>24&255,s[r++]=w>>>16&255,s[r++]=w>>>8&255,s[r++]=w&255;var E=h/4294967296*1e4&268435455;s[r++]=E>>>8&255,s[r++]=E&255,s[r++]=E>>>24&15|16,s[r++]=E>>>16&255,s[r++]=u>>>8|128,s[r++]=u&255;for(var m=0;m<6;++m)s[r+m]=a[m];return e||Qr(s)}function Ms(n){if(!Yr(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Bc(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var vc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ds(n,e,t){function r(s,a,u,c){if(typeof s=="string"&&(s=Bc(s)),typeof a=="string"&&(a=Ms(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(a),h.set(s,a.length),h=t(h),h[6]=h[6]&15|e,h[8]=h[8]&63|128,u){c=c||0;for(var p=0;p<16;++p)u[c+p]=h[p];return u}return Qr(h)}try{r.name=n}catch{}return r.DNS=vc,r.URL=kc,r}function Ac(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return Ic(_c(Rc(n),n.length*8))}function Ic(n){for(var e=[],t=n.length*32,r="0123456789abcdef",s=0;s<t;s+=8){var a=n[s>>5]>>>s%32&255,u=parseInt(r.charAt(a>>>4&15)+r.charAt(a&15),16);e.push(u)}return e}function Ks(n){return(n+64>>>9<<4)+14+1}function _c(n,e){n[e>>5]|=128<<e%32,n[Ks(e)-1]=e;for(var t=1732584193,r=-271733879,s=-1732584194,a=271733878,u=0;u<n.length;u+=16){var c=t,h=r,p=s,g=a;t=Ie(t,r,s,a,n[u],7,-680876936),a=Ie(a,t,r,s,n[u+1],12,-389564586),s=Ie(s,a,t,r,n[u+2],17,606105819),r=Ie(r,s,a,t,n[u+3],22,-1044525330),t=Ie(t,r,s,a,n[u+4],7,-176418897),a=Ie(a,t,r,s,n[u+5],12,1200080426),s=Ie(s,a,t,r,n[u+6],17,-1473231341),r=Ie(r,s,a,t,n[u+7],22,-45705983),t=Ie(t,r,s,a,n[u+8],7,1770035416),a=Ie(a,t,r,s,n[u+9],12,-1958414417),s=Ie(s,a,t,r,n[u+10],17,-42063),r=Ie(r,s,a,t,n[u+11],22,-1990404162),t=Ie(t,r,s,a,n[u+12],7,1804603682),a=Ie(a,t,r,s,n[u+13],12,-40341101),s=Ie(s,a,t,r,n[u+14],17,-1502002290),r=Ie(r,s,a,t,n[u+15],22,1236535329),t=_e(t,r,s,a,n[u+1],5,-165796510),a=_e(a,t,r,s,n[u+6],9,-1069501632),s=_e(s,a,t,r,n[u+11],14,643717713),r=_e(r,s,a,t,n[u],20,-373897302),t=_e(t,r,s,a,n[u+5],5,-701558691),a=_e(a,t,r,s,n[u+10],9,38016083),s=_e(s,a,t,r,n[u+15],14,-660478335),r=_e(r,s,a,t,n[u+4],20,-405537848),t=_e(t,r,s,a,n[u+9],5,568446438),a=_e(a,t,r,s,n[u+14],9,-1019803690),s=_e(s,a,t,r,n[u+3],14,-187363961),r=_e(r,s,a,t,n[u+8],20,1163531501),t=_e(t,r,s,a,n[u+13],5,-1444681467),a=_e(a,t,r,s,n[u+2],9,-51403784),s=_e(s,a,t,r,n[u+7],14,1735328473),r=_e(r,s,a,t,n[u+12],20,-1926607734),t=Re(t,r,s,a,n[u+5],4,-378558),a=Re(a,t,r,s,n[u+8],11,-2022574463),s=Re(s,a,t,r,n[u+11],16,1839030562),r=Re(r,s,a,t,n[u+14],23,-35309556),t=Re(t,r,s,a,n[u+1],4,-1530992060),a=Re(a,t,r,s,n[u+4],11,1272893353),s=Re(s,a,t,r,n[u+7],16,-155497632),r=Re(r,s,a,t,n[u+10],23,-1094730640),t=Re(t,r,s,a,n[u+13],4,681279174),a=Re(a,t,r,s,n[u],11,-358537222),s=Re(s,a,t,r,n[u+3],16,-722521979),r=Re(r,s,a,t,n[u+6],23,76029189),t=Re(t,r,s,a,n[u+9],4,-640364487),a=Re(a,t,r,s,n[u+12],11,-421815835),s=Re(s,a,t,r,n[u+15],16,530742520),r=Re(r,s,a,t,n[u+2],23,-995338651),t=Te(t,r,s,a,n[u],6,-198630844),a=Te(a,t,r,s,n[u+7],10,1126891415),s=Te(s,a,t,r,n[u+14],15,-1416354905),r=Te(r,s,a,t,n[u+5],21,-57434055),t=Te(t,r,s,a,n[u+12],6,1700485571),a=Te(a,t,r,s,n[u+3],10,-1894986606),s=Te(s,a,t,r,n[u+10],15,-1051523),r=Te(r,s,a,t,n[u+1],21,-2054922799),t=Te(t,r,s,a,n[u+8],6,1873313359),a=Te(a,t,r,s,n[u+15],10,-30611744),s=Te(s,a,t,r,n[u+6],15,-1560198380),r=Te(r,s,a,t,n[u+13],21,1309151649),t=Te(t,r,s,a,n[u+4],6,-145523070),a=Te(a,t,r,s,n[u+11],10,-1120210379),s=Te(s,a,t,r,n[u+2],15,718787259),r=Te(r,s,a,t,n[u+9],21,-343485551),t=St(t,c),r=St(r,h),s=St(s,p),a=St(a,g)}return[t,r,s,a]}function Rc(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Ks(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function St(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function Tc(n,e){return n<<e|n>>>32-e}function en(n,e,t,r,s,a){return St(Tc(St(St(e,n),St(r,a)),s),t)}function Ie(n,e,t,r,s,a,u){return en(e&t|~e&r,n,e,s,a,u)}function _e(n,e,t,r,s,a,u){return en(e&r|t&~r,n,e,s,a,u)}function Re(n,e,t,r,s,a,u){return en(e^t^r,n,e,s,a,u)}function Te(n,e,t,r,s,a,u){return en(t^(e|~r),n,e,s,a,u)}var Cc=Ds("v3",48,Ac);const Uc=Cc;function Pc(n,e,t){n=n||{};var r=n.random||(n.rng||$s)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return Qr(r)}function Lc(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Rn(n,e){return n<<e|n>>>32-e}function Fc(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var a=n.length/4+2,u=Math.ceil(a/16),c=new Array(u),h=0;h<u;++h){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=n[h*64+g*4]<<24|n[h*64+g*4+1]<<16|n[h*64+g*4+2]<<8|n[h*64+g*4+3];c[h]=p}c[u-1][14]=(n.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(n.length-1)*8&4294967295;for(var w=0;w<u;++w){for(var E=new Uint32Array(80),m=0;m<16;++m)E[m]=c[w][m];for(var x=16;x<80;++x)E[x]=Rn(E[x-3]^E[x-8]^E[x-14]^E[x-16],1);for(var B=t[0],S=t[1],R=t[2],I=t[3],A=t[4],M=0;M<80;++M){var T=Math.floor(M/20),D=Rn(B,5)+Lc(T,S,R,I)+A+e[T]+E[M]>>>0;A=I,I=R,R=Rn(S,30)>>>0,S=B,B=D}t[0]=t[0]+B>>>0,t[1]=t[1]+S>>>0,t[2]=t[2]+R>>>0,t[3]=t[3]+I>>>0,t[4]=t[4]+A>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Oc=Ds("v5",80,Fc);const Nc=Oc,$c="00000000-0000-0000-0000-000000000000";function Mc(n){if(!Yr(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Dc=Object.freeze(Object.defineProperty({__proto__:null,NIL:$c,parse:Ms,stringify:Qr,v1:Sc,v3:Uc,v4:Pc,v5:Nc,validate:Yr,version:Mc},Symbol.toStringTag,{value:"Module"})),qs=ht(Dc),Kc=qs.v4,qc=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const a={method:n};if(s===2&&(a.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");a.params=e}if(typeof t>"u"){const u=typeof r.generator=="function"?r.generator:function(){return Kc()};a.id=u(a,r)}else s===2&&t===null?r.notificationIdNull&&(a.id=null):a.id=t;return a};var Hc=qc;const zc=qs.v4,jc=Hc,wr=function(n,e){if(!(this instanceof wr))return new wr(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return zc()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var Wc=wr;wr.prototype.request=function(n,e,t,r){const s=this;let a=null;const u=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&n&&typeof n=="object"&&typeof e=="function")r=e,a=n;else{typeof t=="function"&&(r=t,t=void 0);const p=typeof r=="function";try{a=jc(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return r(g);throw g}if(!p)return a}let h;try{h=JSON.stringify(a,this.options.replacer)}catch(p){return r(p)}return this.callServer(h,function(p,g){s._parseResponse(p,g,r)}),a};wr.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(r)){const s=function(u){return typeof u.error<"u"},a=function(u){return!s(u)};return t(null,r.filter(s),r.filter(a))}else return t(null,r.error,r.result);t(null,r)};const Gc=jr(Wc);var Hs={},zs={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(zs);var js=zs.exports;const Vc=ht(Ao),Jc=ht(Io),Ws=ht(_o),Gs=ht(Ro),Vs=ht(To),Js=ht(Co),Xs=ht(Uo);var Tn={exports:{}},_i;function Zs(){return _i||(_i=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(h,p,g){this.fn=h,this.context=p,this.once=g||!1}function a(h,p,g,w,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var m=new s(g,w||h,E),x=t?t+p:p;return h._events[x]?h._events[x].fn?h._events[x]=[h._events[x],m]:h._events[x].push(m):(h._events[x]=m,h._eventsCount++),h}function u(h,p){--h._eventsCount===0?h._events=new r:delete h._events[p]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],g,w;if(this._eventsCount===0)return p;for(w in g=this._events)e.call(g,w)&&p.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},c.prototype.listeners=function(p){var g=t?t+p:p,w=this._events[g];if(!w)return[];if(w.fn)return[w.fn];for(var E=0,m=w.length,x=new Array(m);E<m;E++)x[E]=w[E].fn;return x},c.prototype.listenerCount=function(p){var g=t?t+p:p,w=this._events[g];return w?w.fn?1:w.length:0},c.prototype.emit=function(p,g,w,E,m,x){var B=t?t+p:p;if(!this._events[B])return!1;var S=this._events[B],R=arguments.length,I,A;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),R){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,w),!0;case 4:return S.fn.call(S.context,g,w,E),!0;case 5:return S.fn.call(S.context,g,w,E,m),!0;case 6:return S.fn.call(S.context,g,w,E,m,x),!0}for(A=1,I=new Array(R-1);A<R;A++)I[A-1]=arguments[A];S.fn.apply(S.context,I)}else{var M=S.length,T;for(A=0;A<M;A++)switch(S[A].once&&this.removeListener(p,S[A].fn,void 0,!0),R){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,g);break;case 3:S[A].fn.call(S[A].context,g,w);break;case 4:S[A].fn.call(S[A].context,g,w,E);break;default:if(!I)for(T=1,I=new Array(R-1);T<R;T++)I[T-1]=arguments[T];S[A].fn.apply(S[A].context,I)}}return!0},c.prototype.on=function(p,g,w){return a(this,p,g,w,!1)},c.prototype.once=function(p,g,w){return a(this,p,g,w,!0)},c.prototype.removeListener=function(p,g,w,E){var m=t?t+p:p;if(!this._events[m])return this;if(!g)return u(this,m),this;var x=this._events[m];if(x.fn)x.fn===g&&(!E||x.once)&&(!w||x.context===w)&&u(this,m);else{for(var B=0,S=[],R=x.length;B<R;B++)(x[B].fn!==g||E&&!x[B].once||w&&x[B].context!==w)&&S.push(x[B]);S.length?this._events[m]=S.length===1?S[0]:S:u(this,m)}return this},c.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&u(this,g)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c}(Tn)),Tn.exports}(function(n){var e=js;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Po),r=e(Vc),s=e(Jc),a=e(Ws),u=e(Gs),c=e(Vs),h=e(Js),p=e(Xs),g=Zs();function w(B){var S=E();return function(){var I=(0,p.default)(B),A;if(S){var M=(0,p.default)(this).constructor;A=Reflect.construct(I,arguments,M)}else A=I.apply(this,arguments);return(0,h.default)(this,A)}}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var m=function(B,S){var R={};for(var I in B)Object.prototype.hasOwnProperty.call(B,I)&&S.indexOf(I)<0&&(R[I]=B[I]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,I=Object.getOwnPropertySymbols(B);A<I.length;A++)S.indexOf(I[A])<0&&Object.prototype.propertyIsEnumerable.call(B,I[A])&&(R[I[A]]=B[I[A]]);return R},x=function(B){(0,c.default)(R,B);var S=w(R);function R(I){var A,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=arguments.length>3?arguments[3]:void 0;(0,a.default)(this,R);var O=T.autoconnect,j=O===void 0?!0:O,le=T.reconnect,Ae=le===void 0?!0:le,qe=T.reconnect_interval,Oe=qe===void 0?1e3:qe,Ze=T.max_reconnects,at=Ze===void 0?5:Ze,Ye=m(T,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return A=S.call(this),A.webSocketFactory=I,A.queue={},A.rpc_id=0,A.address=M,A.autoconnect=j,A.ready=!1,A.reconnect=Ae,A.reconnect_timer_id=void 0,A.reconnect_interval=Oe,A.max_reconnects=at,A.rest_options=Ye,A.current_reconnects=0,A.generate_request_id=D||function(){return++A.rpc_id},A.autoconnect&&A._connect(A.address,Object.assign({autoconnect:A.autoconnect,reconnect:A.reconnect,reconnect_interval:A.reconnect_interval,max_reconnects:A.max_reconnects},A.rest_options)),A}return(0,u.default)(R,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(A,M,T,D){var O=this;return!D&&(0,s.default)(T)==="object"&&(D=T,T=null),new Promise(function(j,le){if(!O.ready)return le(new Error("socket not ready"));var Ae=O.generate_request_id(A,M),qe={jsonrpc:"2.0",method:A,params:M||null,id:Ae};O.socket.send(JSON.stringify(qe),D,function(Oe){if(Oe)return le(Oe);O.queue[Ae]={promise:[j,le]},T&&(O.queue[Ae].timeout=setTimeout(function(){delete O.queue[Ae],le(new Error("reply timeout"))},T))})})}},{key:"login",value:function(){var I=(0,r.default)(t.default.mark(function M(T){var D;return t.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.call("rpc.login",T);case 2:if(D=j.sent,D){j.next=5;break}throw new Error("authentication failed");case 5:return j.abrupt("return",D);case 6:case"end":return j.stop()}},M,this)}));function A(M){return I.apply(this,arguments)}return A}()},{key:"listMethods",value:function(){var I=(0,r.default)(t.default.mark(function M(){return t.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.call("__listMethods");case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},M,this)}));function A(){return I.apply(this,arguments)}return A}()},{key:"notify",value:function(A,M){var T=this;return new Promise(function(D,O){if(!T.ready)return O(new Error("socket not ready"));var j={jsonrpc:"2.0",method:A,params:M||null};T.socket.send(JSON.stringify(j),function(le){if(le)return O(le);D()})})}},{key:"subscribe",value:function(){var I=(0,r.default)(t.default.mark(function M(T){var D;return t.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return typeof T=="string"&&(T=[T]),j.next=3,this.call("rpc.on",T);case 3:if(D=j.sent,!(typeof T=="string"&&D[T]!=="ok")){j.next=6;break}throw new Error("Failed subscribing to an event '"+T+"' with: "+D[T]);case 6:return j.abrupt("return",D);case 7:case"end":return j.stop()}},M,this)}));function A(M){return I.apply(this,arguments)}return A}()},{key:"unsubscribe",value:function(){var I=(0,r.default)(t.default.mark(function M(T){var D;return t.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return typeof T=="string"&&(T=[T]),j.next=3,this.call("rpc.off",T);case 3:if(D=j.sent,!(typeof T=="string"&&D[T]!=="ok")){j.next=6;break}throw new Error("Failed unsubscribing from an event with: "+D);case 6:return j.abrupt("return",D);case 7:case"end":return j.stop()}},M,this)}));function A(M){return I.apply(this,arguments)}return A}()},{key:"close",value:function(A,M){this.socket.close(A||1e3,M)}},{key:"_connect",value:function(A,M){var T=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(A,M),this.socket.addEventListener("open",function(){T.ready=!0,T.emit("open"),T.current_reconnects=0}),this.socket.addEventListener("message",function(D){var O=D.data;O instanceof ArrayBuffer&&(O=Buffer.from(O).toString());try{O=JSON.parse(O)}catch{return}if(O.notification&&T.listeners(O.notification).length){if(!Object.keys(O.params).length)return T.emit(O.notification);var j=[O.notification];if(O.params.constructor===Object)j.push(O.params);else for(var le=0;le<O.params.length;le++)j.push(O.params[le]);return Promise.resolve().then(function(){T.emit.apply(T,j)})}if(!T.queue[O.id])return O.method&&O.params?Promise.resolve().then(function(){T.emit(O.method,O.params)}):void 0;"error"in O=="result"in O&&T.queue[O.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),T.queue[O.id].timeout&&clearTimeout(T.queue[O.id].timeout),O.error?T.queue[O.id].promise[1](O.error):T.queue[O.id].promise[0](O.result),delete T.queue[O.id]}),this.socket.addEventListener("error",function(D){return T.emit("error",D)}),this.socket.addEventListener("close",function(D){var O=D.code,j=D.reason;T.ready&&setTimeout(function(){return T.emit("close",O,j)},0),T.ready=!1,T.socket=void 0,O!==1e3&&(T.current_reconnects++,T.reconnect&&(T.max_reconnects>T.current_reconnects||T.max_reconnects===0)&&(T.reconnect_timer_id=setTimeout(function(){return T._connect(A,M)},T.reconnect_interval)))})}}]),R}(g.EventEmitter);n.default=x})(Hs);const Xc=jr(Hs);var Ys={};(function(n){var e=js;Object.defineProperty(n,"__esModule",{value:!0}),n.default=w;var t=e(Ws),r=e(Gs),s=e(Vs),a=e(Js),u=e(Xs),c=Zs();function h(E){var m=p();return function(){var B=(0,u.default)(E),S;if(m){var R=(0,u.default)(this).constructor;S=Reflect.construct(B,arguments,R)}else S=B.apply(this,arguments);return(0,a.default)(this,S)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=function(E){(0,s.default)(x,E);var m=h(x);function x(B,S,R){var I;return(0,t.default)(this,x),I=m.call(this),I.socket=new window.WebSocket(B,R),I.socket.onopen=function(){return I.emit("open")},I.socket.onmessage=function(A){return I.emit("message",A.data)},I.socket.onerror=function(A){return I.emit("error",A)},I.socket.onclose=function(A){I.emit("close",A.code,A.reason)},I}return(0,r.default)(x,[{key:"send",value:function(S,R,I){var A=I||R;try{this.socket.send(S),A()}catch(M){A(M)}}},{key:"close",value:function(S,R){this.socket.close(S,R)}},{key:"addEventListener",value:function(S,R,I){this.socket.addEventListener(S,R,I)}}]),x}(c.EventEmitter);function w(E,m){return new g(E,m)}})(Ys);const Zc=jr(Ys),[Qs,eo,to]=[[],[],[]],Yc=BigInt(0),cr=BigInt(1),Qc=BigInt(2),eu=BigInt(7),tu=BigInt(256),ru=BigInt(113);for(let n=0,e=cr,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],Qs.push(2*(5*r+t)),eo.push((n+1)*(n+2)/2%64);let s=Yc;for(let a=0;a<7;a++)e=(e<<cr^(e>>eu)*ru)%tu,e&Qc&&(s^=cr<<(cr<<BigInt(a))-cr);to.push(s)}const[nu,iu]=Y.split(to,!0),Ri=(n,e,t)=>t>32?Y.rotlBH(n,e,t):Y.rotlSH(n,e,t),Ti=(n,e,t)=>t>32?Y.rotlBL(n,e,t):Y.rotlSL(n,e,t);function su(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let u=0;u<10;u++)t[u]=n[u]^n[u+10]^n[u+20]^n[u+30]^n[u+40];for(let u=0;u<10;u+=2){const c=(u+8)%10,h=(u+2)%10,p=t[h],g=t[h+1],w=Ri(p,g,1)^t[c],E=Ti(p,g,1)^t[c+1];for(let m=0;m<50;m+=10)n[u+m]^=w,n[u+m+1]^=E}let s=n[2],a=n[3];for(let u=0;u<24;u++){const c=eo[u],h=Ri(s,a,c),p=Ti(s,a,c),g=Qs[u];s=n[g],a=n[g+1],n[g]=h,n[g+1]=p}for(let u=0;u<50;u+=10){for(let c=0;c<10;c++)t[c]=n[u+c];for(let c=0;c<10;c++)n[u+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=nu[r],n[1]^=iu[r]}t.fill(0)}class tn extends Jn{constructor(e,t,r,s=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,De.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zo(this.state)}keccak(){su(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){De.exists(this);const{blockLen:t,state:r}=this;e=xr(e);const s=e.length;for(let a=0;a<s;){const u=Math.min(t-this.pos,s-a);for(let c=0;c<u;c++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,t&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){De.exists(this,!1),De.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,a=e.length;s<a;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,a-s);e.set(t.subarray(this.posOut,this.posOut+u),s),this.posOut+=u,s+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return De.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(De.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:a,enableXOF:u}=this;return e||(e=new tn(t,r,s,u,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=s,e.enableXOF=u,e.destroyed=this.destroyed,e}}const _t=(n,e,t)=>$t(()=>new tn(e,n,t));_t(6,144,224/8);_t(6,136,256/8);_t(6,104,384/8);_t(6,72,512/8);_t(1,144,224/8);_t(1,136,256/8);_t(1,104,384/8);_t(1,72,512/8);const ro=(n,e,t)=>Go((r={})=>new tn(e,n,r.dkLen===void 0?t:r.dkLen,!0));ro(31,168,128/8);ro(31,136,256/8);class no extends Jn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,De.hash(e);const r=xr(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?e.create().update(r).digest():r);for(let u=0;u<a.length;u++)a[u]^=54;this.iHash.update(a),this.oHash=e.create();for(let u=0;u<a.length;u++)a[u]^=106;this.oHash.update(a),a.fill(0)}update(e){return De.exists(this),this.iHash.update(e),this}digestInto(e){De.exists(this),De.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:a,blockLen:u,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=a,e.blockLen=u,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const io=(n,e,t)=>new no(n,e).update(t).digest();io.create=(n,e)=>new no(n,e);Ft.sha512Sync=(...n)=>Ea(Ft.concatBytes(...n));Ft.randomPrivateKey;const Ci=()=>{const n=Ft.randomPrivateKey(),e=Mn(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},Mn=Qn.getPublicKey;function Ui(n){try{return ge.fromHex(n,!0),!0}catch{return!1}}const ou=(n,e)=>Qn.sign(n,e.slice(0,32)),au=Qn.verify,Vt=n=>ee.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ee.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ee.Buffer.from(n);class cu{constructor(e){Object.assign(this,e)}encode(){return ee.Buffer.from(ys(Ur,this))}static decode(e){return ws(Ur,this,e)}static decodeUnchecked(e){return fs(Ur,this,e)}}const Ur=new Map;let so;const uu=32,rt=32;function lu(n){return n._bn!==void 0}let Pi=1;so=Symbol.toStringTag;class G extends cu{constructor(e){if(super({}),this._bn=void 0,lu(e))this._bn=e._bn;else{if(typeof e=="string"){const t=fe.decode(e);if(t.length!=rt)throw new Error("Invalid public key input");this._bn=new bi(t)}else this._bn=new bi(e);if(this._bn.byteLength()>rt)throw new Error("Invalid public key input")}}static unique(){const e=new G(Pi);return Pi+=1,new G(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return fe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ee.Buffer);if(e.length===rt)return e;const t=ee.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[so](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const s=ee.Buffer.concat([e.toBuffer(),ee.Buffer.from(t),r.toBuffer()]),a=Nn(s);return new G(a)}static createProgramAddressSync(e,t){let r=ee.Buffer.alloc(0);e.forEach(function(a){if(a.length>uu)throw new TypeError("Max seed length exceeded");r=ee.Buffer.concat([r,Vt(a)])}),r=ee.Buffer.concat([r,t.toBuffer(),ee.Buffer.from("ProgramDerivedAddress")]);const s=Nn(r);if(Ui(s))throw new Error("Invalid seeds, address must fall off the curve");return new G(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{const a=e.concat(ee.Buffer.from([r]));s=this.createProgramAddressSync(a,t)}catch(a){if(a instanceof TypeError)throw a;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new G(e);return Ui(t.toBytes())}}G.default=new G("11111111111111111111111111111111");Ur.set(G,{kind:"struct",fields:[["_bn","u256"]]});new G("BPFLoader1111111111111111111111111111111111");const Wt=1280-40-8,oo=127,Dn=64;class ao extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ao.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class co extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(co.prototype,"name",{value:"TransactionExpiredTimeoutError"});class lr extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(lr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class qr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((a,u)=>{r.set(a.toBase58(),u)});const s=a=>{const u=r.get(a.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return e.map(a=>({programIdIndex:s(a.programId),accountKeyIndexes:a.keys.map(u=>s(u.pubkey)),data:a.data}))}}const re=(n="publicKey")=>ye(32,n),jt=(n="string")=>{const e=q([W("length"),W("lengthPadding"),ye(Lt(W(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(a,u)=>t(a,u).chars.toString(),s.encode=(a,u,c)=>{const h={chars:ee.Buffer.from(a,"utf8")};return r(h,u,c)},s.alloc=a=>W().span+W().span+ee.Buffer.from(a,"utf8").length,s},fu=(n="authorized")=>q([re("staker"),re("withdrawer")],n),hu=(n="lockup")=>q([Me("unixTimestamp"),Me("epoch"),re("custodian")],n),du=(n="voteInit")=>q([re("nodePubkey"),re("authorizedVoter"),re("authorizedWithdrawer"),ae("commission")],n),pu=(n="voteAuthorizeWithSeedArgs")=>q([W("voteAuthorizationType"),re("currentAuthorityDerivedKeyOwnerPubkey"),jt("currentAuthorityDerivedKeySeed"),re("newAuthorized")],n);function ze(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function je(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function me(n,e){if(!n)throw new Error(e||"Assertion failed")}class rn{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,s=u=>{const c=u.toBase58();let h=r.get(c);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,h)),h},a=s(t);a.isSigner=!0,a.isWritable=!0;for(const u of e){s(u.programId).isInvoked=!0;for(const c of u.keys){const h=s(c.pubkey);h.isSigner||(h.isSigner=c.isSigner),h.isWritable||(h.isWritable=c.isWritable)}}return new rn(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];me(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,h])=>h.isSigner&&h.isWritable),r=e.filter(([,h])=>h.isSigner&&!h.isWritable),s=e.filter(([,h])=>!h.isSigner&&h.isWritable),a=e.filter(([,h])=>!h.isSigner&&!h.isWritable),u={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:a.length};{me(t.length>0,"Expected at least one writable signer key");const[h]=t[0];me(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([h])=>new G(h)),...r.map(([h])=>new G(h)),...s.map(([h])=>new G(h)),...a.map(([h])=>new G(h))];return[u,c]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[s,a]=this.drainKeysFoundInLookupTable(e.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:a}]}drainKeysFoundInLookupTable(e,t){const r=new Array,s=new Array;for(const[a,u]of this.keyMetaMap.entries())if(t(u)){const c=new G(a),h=e.findIndex(p=>p.equals(c));h>=0&&(me(h<256,"Max lookup table index exceeded"),r.push(h),s.push(c),this.keyMetaMap.delete(a))}return[r,s]}}class kt{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new G(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:fe.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new qr(this.staticAccountKeys)}static compile(e){const t=rn.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),u=new qr(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:fe.encode(c.data)}));return new kt({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:u})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,a=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<a}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];je(t,e);const r=this.instructions.map(w=>{const{accounts:E,programIdIndex:m}=w,x=Array.from(fe.decode(w.data));let B=[];je(B,E.length);let S=[];return je(S,x.length),{programIdIndex:m,keyIndicesCount:ee.Buffer.from(B),keyIndices:E,dataLength:ee.Buffer.from(S),data:x}});let s=[];je(s,r.length);let a=ee.Buffer.alloc(Wt);ee.Buffer.from(s).copy(a);let u=s.length;r.forEach(w=>{const m=q([ae("programIdIndex"),ye(w.keyIndicesCount.length,"keyIndicesCount"),Ue(ae("keyIndex"),w.keyIndices.length,"keyIndices"),ye(w.dataLength.length,"dataLength"),Ue(ae("userdatum"),w.data.length,"data")]).encode(w,a,u);u+=m}),a=a.slice(0,u);const c=q([ye(1,"numRequiredSignatures"),ye(1,"numReadonlySignedAccounts"),ye(1,"numReadonlyUnsignedAccounts"),ye(t.length,"keyCount"),Ue(re("key"),e,"keys"),re("recentBlockhash")]),h={numRequiredSignatures:ee.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ee.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ee.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ee.Buffer.from(t),keys:this.accountKeys.map(w=>Vt(w.toBytes())),recentBlockhash:fe.decode(this.recentBlockhash)};let p=ee.Buffer.alloc(2048);const g=c.encode(h,p);return a.copy(p,g),p.slice(0,g+a.length)}static from(e){let t=[...e];const r=t.shift();if(r!==(r&oo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=t.shift(),a=t.shift(),u=ze(t);let c=[];for(let E=0;E<u;E++){const m=t.slice(0,rt);t=t.slice(rt),c.push(new G(ee.Buffer.from(m)))}const h=t.slice(0,rt);t=t.slice(rt);const p=ze(t);let g=[];for(let E=0;E<p;E++){const m=t.shift(),x=ze(t),B=t.slice(0,x);t=t.slice(x);const S=ze(t),R=t.slice(0,S),I=fe.encode(ee.Buffer.from(R));t=t.slice(S),g.push({programIdIndex:m,accounts:B,data:I})}const w={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a},recentBlockhash:fe.encode(ee.Buffer.from(h)),accountKeys:c,instructions:g};return new kt(w)}}class Hr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new qr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,a=this.addressTableLookups.reduce((u,c)=>u+c.writableIndexes.length,0);return s<a}else if(e>=this.header.numRequiredSignatures){const s=e-t,u=r-t-this.header.numReadonlyUnsignedAccounts;return s<u}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(a=>a.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const a of r.writableIndexes)if(a<s.state.addresses.length)t.writable.push(s.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${r.accountKey.toBase58()}`);for(const a of r.readonlyIndexes)if(a<s.state.addresses.length)t.readonly.push(s.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=rn.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},a=e.addressLookupTableAccounts||[];for(const g of a){const w=t.extractTableLookup(g);if(w!==void 0){const[E,{writable:m,readonly:x}]=w;r.push(E),s.writable.push(...m),s.readonly.push(...x)}}const[u,c]=t.getMessageComponents(),p=new qr(c,s).compileInstructions(e.instructions);return new Hr({header:u,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:r})}serialize(){const e=Array();je(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();je(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),a=Array();je(a,this.addressTableLookups.length);const u=q([ae("prefix"),q([ae("numRequiredSignatures"),ae("numReadonlySignedAccounts"),ae("numReadonlyUnsignedAccounts")],"header"),ye(e.length,"staticAccountKeysLength"),Ue(re(),this.staticAccountKeys.length,"staticAccountKeys"),re("recentBlockhash"),ye(r.length,"instructionsLength"),ye(t.length,"serializedInstructions"),ye(a.length,"addressTableLookupsLength"),ye(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Wt),h=128,p=u.encode({prefix:h,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:fe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(a),serializedAddressTableLookups:s},c);return c.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(Wt);for(const r of this.compiledInstructions){const s=Array();je(s,r.accountKeyIndexes.length);const a=Array();je(a,r.data.length);const u=q([ae("programIdIndex"),ye(s.length,"encodedAccountKeyIndexesLength"),Ue(ae(),r.accountKeyIndexes.length,"accountKeyIndexes"),ye(a.length,"encodedDataLength"),ye(r.data.length,"data")]);e+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(a),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Wt);for(const r of this.addressTableLookups){const s=Array();je(s,r.writableIndexes.length);const a=Array();je(a,r.readonlyIndexes.length);const u=q([re("accountKey"),ye(s.length,"encodedWritableIndexesLength"),Ue(ae(),r.writableIndexes.length,"writableIndexes"),ye(a.length,"encodedReadonlyIndexesLength"),Ue(ae(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(a),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=t.shift(),s=r&oo;me(r!==s,"Expected versioned message but received legacy message");const a=s;me(a===0,`Expected versioned message with version 0 but found version ${a}`);const u={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},c=[],h=ze(t);for(let x=0;x<h;x++)c.push(new G(t.splice(0,rt)));const p=fe.encode(t.splice(0,rt)),g=ze(t),w=[];for(let x=0;x<g;x++){const B=t.shift(),S=ze(t),R=t.splice(0,S),I=ze(t),A=new Uint8Array(t.splice(0,I));w.push({programIdIndex:B,accountKeyIndexes:R,data:A})}const E=ze(t),m=[];for(let x=0;x<E;x++){const B=new G(t.splice(0,rt)),S=ze(t),R=t.splice(0,S),I=ze(t),A=t.splice(0,I);m.push({accountKey:B,writableIndexes:R,readonlyIndexes:A})}return new Hr({header:u,staticAccountKeys:c,recentBlockhash:p,compiledInstructions:w,addressTableLookups:m})}}let tt;(function(n){n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID"})(tt||(tt={}));const gu=ee.Buffer.alloc(Dn).fill(0);class Li{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ee.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class xt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Li(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<t.length;B++)if(t[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const s=[],a=[];t.forEach(B=>{B.keys.forEach(R=>{a.push({...R})});const S=B.programId.toString();s.includes(S)||s.push(S)}),s.forEach(B=>{a.push({pubkey:new G(B),isSigner:!1,isWritable:!1})});const u=[];a.forEach(B=>{const S=B.pubkey.toString(),R=u.findIndex(I=>I.pubkey.toString()===S);R>-1?(u[R].isWritable=u[R].isWritable||B.isWritable,u[R].isSigner=u[R].isSigner||B.isSigner):u.push(B)}),u.sort(function(B,S){return B.isSigner!==S.isSigner?B.isSigner?-1:1:B.isWritable!==S.isWritable?B.isWritable?-1:1:B.pubkey.toBase58().localeCompare(S.pubkey.toBase58())});const c=u.findIndex(B=>B.pubkey.equals(r));if(c>-1){const[B]=u.splice(c,1);B.isSigner=!0,B.isWritable=!0,u.unshift(B)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const B of this.signatures){const S=u.findIndex(R=>R.pubkey.equals(B.publicKey));if(S>-1)u[S].isSigner||(u[S].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let h=0,p=0,g=0;const w=[],E=[];u.forEach(({pubkey:B,isSigner:S,isWritable:R})=>{S?(w.push(B.toString()),h+=1,R||(p+=1)):(E.push(B.toString()),R||(g+=1))});const m=w.concat(E),x=t.map(B=>{const{data:S,programId:R}=B;return{programIdIndex:m.indexOf(R.toString()),accounts:B.keys.map(I=>m.indexOf(I.pubkey.toString())),data:fe.encode(S)}});return x.forEach(B=>{me(B.programIdIndex>=0),B.accounts.forEach(S=>me(S>=0))}),new kt({header:{numRequiredSignatures:h,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:m,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,a)=>t[a].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const a of e){const u=a.publicKey.toString();t.has(u)||(t.add(u),r.push(a))}this.signatures=r.map(a=>({signature:null,publicKey:a.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const a of e){const u=a.publicKey.toString();t.has(u)||(t.add(u),r.push(a))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(s=>{const a=ou(r,s.secretKey);this._addSignature(s.publicKey,Vt(a))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){me(t.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ee.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:r,publicKey:s}of this.signatures)if(r===null){if(t)return!1}else if(!au(r,e,s.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r&&!this._verifySignatures(s,t))throw new Error("Signature verification failed");return this._serialize(s)}_serialize(e){const{signatures:t}=this,r=[];je(r,t.length);const s=r.length+t.length*64+e.length,a=ee.Buffer.alloc(s);return me(t.length<256),ee.Buffer.from(r).copy(a,0),t.forEach(({signature:u},c)=>{u!==null&&(me(u.length===64,"signature has invalid length"),ee.Buffer.from(u).copy(a,r.length+c*64))}),e.copy(a,r.length+t.length*64),me(a.length<=Wt,`Transaction too large: ${a.length} > ${Wt}`),a}get keys(){return me(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return me(this.instructions.length===1),this.instructions[0].programId}get data(){return me(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=ze(t);let s=[];for(let a=0;a<r;a++){const u=t.slice(0,Dn);t=t.slice(Dn),s.push(fe.encode(ee.Buffer.from(u)))}return xt.populate(kt.from(t),s)}static populate(e,t=[]){const r=new xt;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,a)=>{const u={signature:s==fe.encode(gu)?null:fe.decode(s),publicKey:e.accountKeys[a]};r.signatures.push(u)}),e.instructions.forEach(s=>{const a=s.accounts.map(u=>{const c=e.accountKeys[u];return{pubkey:c,isSigner:r.signatures.some(h=>h.publicKey.toString()===c.toString())||e.isAccountSigner(u),isWritable:e.isAccountWritable(u)}});r.instructions.push(new Li({keys:a,programId:e.accountKeys[s.programIdIndex],data:fe.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}new G("SysvarC1ock11111111111111111111111111111111");new G("SysvarEpochSchedu1e111111111111111111111111");new G("Sysvar1nstructions1111111111111111111111111");new G("SysvarRecentB1ockHashes11111111111111111111");new G("SysvarRent111111111111111111111111111111111");new G("SysvarRewards111111111111111111111111111111");new G("SysvarS1otHashes111111111111111111111111111");new G("SysvarS1otHistory11111111111111111111111111");new G("SysvarStakeHistory1111111111111111111111111");function zt(n){return new Promise(e=>setTimeout(e,n))}const yu=Be("lamportsPerSignature"),uo=q([W("version"),W("state"),re("authorizedPubkey"),re("nonce"),q([yu],"feeCalculator")]);uo.span;class hi{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=uo.decode(Vt(e),0);return new hi({authorizedPubkey:new G(t.authorizedPubkey),nonce:new G(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const wu=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},mu=n=>e=>{const t=ye(n,e),{encode:r,decode:s}=wu(t),a=t;return a.decode=(u,c)=>{const h=s(u,c);return ac(ee.Buffer.from(h))},a.encode=(u,c,h)=>{const p=lc(u,n);return r(p,c,h)},a},Jt=mu(8);Object.freeze({Create:{index:0,layout:q([W("instruction"),Me("lamports"),Me("space"),re("programId")])},Assign:{index:1,layout:q([W("instruction"),re("programId")])},Transfer:{index:2,layout:q([W("instruction"),Jt("lamports")])},CreateWithSeed:{index:3,layout:q([W("instruction"),re("base"),jt("seed"),Me("lamports"),Me("space"),re("programId")])},AdvanceNonceAccount:{index:4,layout:q([W("instruction")])},WithdrawNonceAccount:{index:5,layout:q([W("instruction"),Me("lamports")])},InitializeNonceAccount:{index:6,layout:q([W("instruction"),re("authorized")])},AuthorizeNonceAccount:{index:7,layout:q([W("instruction"),re("authorized")])},Allocate:{index:8,layout:q([W("instruction"),Me("space")])},AllocateWithSeed:{index:9,layout:q([W("instruction"),re("base"),jt("seed"),Me("space"),re("programId")])},AssignWithSeed:{index:10,layout:q([W("instruction"),re("base"),jt("seed"),re("programId")])},TransferWithSeed:{index:11,layout:q([W("instruction"),Jt("lamports"),jt("seed"),re("programId")])},UpgradeNonceAccount:{index:12,layout:q([W("instruction")])}});new G("11111111111111111111111111111111");new G("BPFLoader2111111111111111111111111111111111");var bu=Object.prototype.toString,xu=Object.keys||function(n){var e=[];for(var t in n)e.push(t);return e};function fr(n,e){var t,r,s,a,u,c,h;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return fr(n.toJSON(),e);if(h=bu.call(n),h==="[object Array]"){for(s="[",r=n.length-1,t=0;t<r;t++)s+=fr(n[t],!0)+",";return r>-1&&(s+=fr(n[t],!0)),s+"]"}else if(h==="[object Object]"){for(a=xu(n).sort(),r=a.length,s="",t=0;t<r;)u=a[t],c=fr(n[u],!1),c!==void 0&&(s&&(s+=","),s+=JSON.stringify(u)+":"+c),t++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Eu=function(n){var e=fr(n,!1);if(e!==void 0)return""+e},Fi=Eu;const ur=32;function Cn(n){let e=0;for(;n>1;)n/=2,e++;return e}function Su(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Bu{constructor(e,t,r,s,a){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=a}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Cn(Su(e+ur+1))-Cn(ur)-1,r=this.getSlotsInEpoch(t),s=e-(r-ur);return[t,s]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,a=t%this.slotsPerEpoch;return[s,a]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*ur:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Cn(ur)):this.slotsPerEpoch}}class Oi extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}class H extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}var vu=globalThis.fetch;class ku extends Xc{constructor(e,t,r){const s=a=>{const u=Zc(a,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}const Au=160,Iu=64,_u=Au/Iu,Ru=1e3/_u;function Tu(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const Ni=56;class $i{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Tu(Cu,e),r=e.length-Ni;me(r>=0,"lookup table is invalid"),me(r%32===0,"lookup table is invalid");const s=r/32,{addresses:a}=q([Ue(re(),s,"addresses")]).decode(e.slice(Ni));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new G(t.authority[0]):void 0,addresses:a.map(u=>new G(u))}}}const Cu={index:1,layout:q([W("typeIndex"),Jt("deactivationSlot"),Be("lastExtendedSlot"),ae("lastExtendedStartIndex"),ae(),Ue(re(),Lt(ae(),-1),"authority")])},Uu=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Pu(n){const e=n.match(Uu);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,s,a]=e,u=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),h=c==null?"":`:${c+1}`;return`${u}//${r}${h}${a}`}const xe=Ar(li(G),P(),n=>new G(n)),lo=fi([P(),pe("base64")]),di=Ar(li(ee.Buffer),lo,n=>ee.Buffer.from(n[0],"base64")),Lu=30*1e3;function Fu(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function de(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...s}=n;e=r,t=s}return{commitment:e,config:t}}function fo(n){return Fe([U({jsonrpc:pe("2.0"),id:P(),result:n}),U({jsonrpc:pe("2.0"),id:P(),error:U({code:kr(),message:P(),data:J(mc())})})])}const Ou=fo(kr());function Q(n){return Ar(fo(n),Ou,e=>"error"in e?e:{...e,result:L(e.result,n)})}function be(n){return Q(U({context:U({slot:v()}),value:n}))}function nn(n){return U({context:U({slot:v()}),value:n})}function Un(n,e){return n===0?new Hr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new G(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:fe.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new kt(e)}const Nu=U({foundation:v(),foundationTerm:v(),initial:v(),taper:v(),terminal:v()}),$u=Q(N($(U({epoch:v(),effectiveSlot:v(),amount:v(),postBalance:v(),commission:J($(v()))})))),Mu=N(U({slot:v(),prioritizationFee:v()})),Du=U({total:v(),validator:v(),foundation:v(),epoch:v()}),Ku=U({epoch:v(),slotIndex:v(),slotsInEpoch:v(),absoluteSlot:v(),blockHeight:J(v()),transactionCount:J(v())}),qu=U({slotsPerEpoch:v(),leaderScheduleSlotOffset:v(),warmup:ft(),firstNormalEpoch:v(),firstNormalSlot:v()}),Hu=Ns(P(),N(v())),Kt=$(Fe([U({}),P()])),zu=U({err:Kt}),ju=pe("receivedSignature"),Wu=U({"solana-core":P(),"feature-set":J(v())}),Mi=be(U({err:$(Fe([U({}),P()])),logs:$(N(P())),accounts:J($(N($(U({executable:ft(),owner:P(),lamports:v(),data:N(P()),rentEpoch:J(v())}))))),unitsConsumed:J(v()),returnData:J($(U({programId:P(),data:fi([P(),pe("base64")])})))})),Gu=be(U({byIdentity:Ns(P(),N(v())),range:U({firstSlot:v(),lastSlot:v()})}));function Vu(n,e,t,r,s,a){const u=t||vu;let c;a!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let h;return r&&(h=async(g,w)=>{const E=await new Promise((m,x)=>{try{r(g,w,(B,S)=>m([B,S]))}catch(B){x(B)}});return await u(...E)}),new Gc(async(g,w)=>{const E={method:"POST",body:g,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},Vl)};try{let m=5,x,B=500;for(;h?x=await h(n,E):x=await u(n,E),!(x.status!==429||s===!0||(m-=1,m===0));)console.log(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${B}ms delay...`),await zt(B),B*=2;const S=await x.text();x.ok?w(null,S):w(new Error(`${x.status} ${x.statusText}: ${S}`))}catch(m){m instanceof Error&&w(m)}},{})}function Ju(n){return(e,t)=>new Promise((r,s)=>{n.request(e,t,(a,u)=>{if(a){s(a);return}r(u)})})}function Xu(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const s=e.map(a=>n.request(a.methodName,a.args));n.request(s,(a,u)=>{if(a){r(a);return}t(u)})})}const Zu=Q(Nu),Yu=Q(Du),Qu=Q(Mu),el=Q(Ku),tl=Q(qu),rl=Q(Hu),nl=Q(v()),il=be(U({total:v(),circulating:v(),nonCirculating:v(),nonCirculatingAccounts:N(xe)})),Kn=U({amount:P(),uiAmount:$(v()),decimals:v(),uiAmountString:J(P())}),sl=be(N(U({address:xe,amount:P(),uiAmount:$(v()),decimals:v(),uiAmountString:J(P())}))),ol=be(N(U({pubkey:xe,account:U({executable:ft(),owner:xe,lamports:v(),data:di,rentEpoch:v()})}))),qn=U({program:P(),parsed:kr(),space:v()}),al=be(N(U({pubkey:xe,account:U({executable:ft(),owner:xe,lamports:v(),data:qn,rentEpoch:v()})}))),cl=be(N(U({lamports:v(),address:xe}))),mr=U({executable:ft(),owner:xe,lamports:v(),data:di,rentEpoch:v()}),ul=U({pubkey:xe,account:mr}),ll=Ar(Fe([li(ee.Buffer),qn]),Fe([lo,qn]),n=>Array.isArray(n)?L(n,di):n),Hn=U({executable:ft(),owner:xe,lamports:v(),data:ll,rentEpoch:v()}),fl=U({pubkey:xe,account:Hn}),hl=U({state:Fe([pe("active"),pe("inactive"),pe("activating"),pe("deactivating")]),active:v(),inactive:v()}),dl=Q(N(U({signature:P(),slot:v(),err:Kt,memo:$(P()),blockTime:J($(v()))}))),pl=Q(N(U({signature:P(),slot:v(),err:Kt,memo:$(P()),blockTime:J($(v()))}))),gl=U({subscription:v(),result:nn(mr)}),yl=U({pubkey:xe,account:mr}),wl=U({subscription:v(),result:nn(yl)}),ml=U({parent:v(),slot:v(),root:v()}),bl=U({subscription:v(),result:ml}),xl=Fe([U({type:Fe([pe("firstShredReceived"),pe("completed"),pe("optimisticConfirmation"),pe("root")]),slot:v(),timestamp:v()}),U({type:pe("createdBank"),parent:v(),slot:v(),timestamp:v()}),U({type:pe("frozen"),slot:v(),timestamp:v(),stats:U({numTransactionEntries:v(),numSuccessfulTransactions:v(),numFailedTransactions:v(),maxTransactionsPerEntry:v()})}),U({type:pe("dead"),slot:v(),timestamp:v(),err:P()})]),El=U({subscription:v(),result:xl}),Sl=U({subscription:v(),result:nn(Fe([zu,ju]))}),Bl=U({subscription:v(),result:v()}),vl=U({pubkey:P(),gossip:$(P()),tpu:$(P()),rpc:$(P()),version:$(P())}),Di=U({votePubkey:P(),nodePubkey:P(),activatedStake:v(),epochVoteAccount:ft(),epochCredits:N(fi([v(),v(),v()])),commission:v(),lastVote:v(),rootSlot:$(v())}),kl=Q(U({current:N(Di),delinquent:N(Di)})),Al=Fe([pe("processed"),pe("confirmed"),pe("finalized")]),Il=U({slot:v(),confirmations:$(v()),err:Kt,confirmationStatus:J(Al)}),_l=be(N($(Il))),Rl=Q(v()),ho=U({accountKey:xe,writableIndexes:N(v()),readonlyIndexes:N(v())}),pi=U({signatures:N(P()),message:U({accountKeys:N(P()),header:U({numRequiredSignatures:v(),numReadonlySignedAccounts:v(),numReadonlyUnsignedAccounts:v()}),instructions:N(U({accounts:N(v()),data:P(),programIdIndex:v()})),recentBlockhash:P(),addressTableLookups:J(N(ho))})}),po=U({pubkey:xe,signer:ft(),writable:ft(),source:J(Fe([pe("transaction"),pe("lookupTable")]))}),go=U({accountKeys:N(po),signatures:N(P())}),yo=U({parsed:kr(),program:P(),programId:xe}),wo=U({accounts:N(xe),data:P(),programId:xe}),Tl=Fe([wo,yo]),Cl=Fe([U({parsed:kr(),program:P(),programId:P()}),U({accounts:N(P()),data:P(),programId:P()})]),mo=Ar(Tl,Cl,n=>"accounts"in n?L(n,wo):L(n,yo)),bo=U({signatures:N(P()),message:U({accountKeys:N(po),instructions:N(mo),recentBlockhash:P(),addressTableLookups:J($(N(ho)))})}),zr=U({accountIndex:v(),mint:P(),owner:J(P()),uiTokenAmount:Kn}),xo=U({writable:N(xe),readonly:N(xe)}),sn=U({err:Kt,fee:v(),innerInstructions:J($(N(U({index:v(),instructions:N(U({accounts:N(v()),data:P(),programIdIndex:v()}))})))),preBalances:N(v()),postBalances:N(v()),logMessages:J($(N(P()))),preTokenBalances:J($(N(zr))),postTokenBalances:J($(N(zr))),loadedAddresses:J(xo),computeUnitsConsumed:J(v())}),gi=U({err:Kt,fee:v(),innerInstructions:J($(N(U({index:v(),instructions:N(mo)})))),preBalances:N(v()),postBalances:N(v()),logMessages:J($(N(P()))),preTokenBalances:J($(N(zr))),postTokenBalances:J($(N(zr))),loadedAddresses:J(xo),computeUnitsConsumed:J(v())}),Qt=Fe([pe(0),pe("legacy")]),qt=U({pubkey:P(),lamports:v(),postBalance:$(v()),rewardType:$(P()),commission:J($(v()))}),Ul=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),transactions:N(U({transaction:pi,meta:$(sn),version:J(Qt)})),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),Pl=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),Ll=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),transactions:N(U({transaction:go,meta:$(sn),version:J(Qt)})),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),Fl=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),transactions:N(U({transaction:bo,meta:$(gi),version:J(Qt)})),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),Ol=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),transactions:N(U({transaction:go,meta:$(gi),version:J(Qt)})),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),Nl=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),rewards:J(N(qt)),blockTime:$(v()),blockHeight:$(v())}))),$l=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),transactions:N(U({transaction:pi,meta:$(sn)})),rewards:J(N(qt)),blockTime:$(v())}))),Ki=Q($(U({blockhash:P(),previousBlockhash:P(),parentSlot:v(),signatures:N(P()),blockTime:$(v())}))),Pn=Q($(U({slot:v(),meta:sn,blockTime:J($(v())),transaction:pi,version:J(Qt)}))),Tr=Q($(U({slot:v(),transaction:bo,meta:$(gi),blockTime:J($(v())),version:J(Qt)}))),Ml=be(U({blockhash:P(),feeCalculator:U({lamportsPerSignature:v()})})),Dl=be(U({blockhash:P(),lastValidBlockHeight:v()})),Kl=U({slot:v(),numTransactions:v(),numSlots:v(),samplePeriodSecs:v()}),ql=Q(N(Kl)),Hl=be($(U({feeCalculator:U({lamportsPerSignature:v()})}))),zl=Q(P()),jl=Q(P()),Wl=U({err:Kt,logs:N(P()),signature:P()}),Gl=U({result:nn(Wl),subscription:v()}),Vl={"solana-client":"js/0.0.0-development"};class yi{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:w,config:E}=de(g),m=this._buildArgs([],w,void 0,E),x=Fi(m);return p[x]=p[x]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",m),S=L(B,Q(v()));if("error"in S)throw new H(S.error,"failed to get block height information");return S.result}finally{delete p[x]}})(),await p[x]}})();let r,s,a,u,c,h;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,a=t.fetch,u=t.fetchMiddleware,c=t.disableRetryOnRateLimit,h=t.httpAgent),this._rpcEndpoint=Fu(e),this._rpcWsEndpoint=r||Pu(e),this._rpcClient=Vu(e,s,a,u,c,h),this._rpcRequest=Ju(this._rpcClient),this._rpcBatchRequest=Xu(this._rpcClient),this._rpcWebSocket=new ku(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgs([e.toBase58()],r,void 0,s),u=await this._rpcRequest("getBalance",a),c=L(u,be(v()));if("error"in c)throw new H(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=L(t,Q($(v())));if("error"in r)throw new H(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=L(e,Q(v()));if("error"in t)throw new H(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=L(e,nl);if("error"in t)throw new H(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),s=L(r,il);if("error"in s)throw new H(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),a=L(s,be(Kn));if("error"in a)throw new H(a.error,"failed to get token supply");return a.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),a=L(s,be(Kn));if("error"in a)throw new H(a.error,"failed to get token account balance");return a.result}async getTokenAccountsByOwner(e,t,r){const{commitment:s,config:a}=de(r);let u=[e.toBase58()];"mint"in t?u.push({mint:t.mint.toBase58()}):u.push({programId:t.programId.toBase58()});const c=this._buildArgs(u,s,"base64",a),h=await this._rpcRequest("getTokenAccountsByOwner",c),p=L(h,ol);if("error"in p)throw new H(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const a=this._buildArgs(s,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",a),c=L(u,al);if("error"in c)throw new H(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),a=L(s,cl);if("error"in a)throw new H(a.error,"failed to get largest accounts");return a.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),a=L(s,sl);if("error"in a)throw new H(a.error,"failed to get token largest accounts");return a.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgs([e.toBase58()],r,"base64",s),u=await this._rpcRequest("getAccountInfo",a),c=L(u,be($(mr)));if("error"in c)throw new H(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgs([e.toBase58()],r,"jsonParsed",s),u=await this._rpcRequest("getAccountInfo",a),c=L(u,be($(Hn)));if("error"in c)throw new H(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:s}=de(t),a=e.map(p=>p.toBase58()),u=this._buildArgs([a],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",u),h=L(c,be(N($(Hn))));if("error"in h)throw new H(h.error,`failed to get info for accounts ${a}`);return h.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:s}=de(t),a=e.map(p=>p.toBase58()),u=this._buildArgs([a],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",u),h=L(c,be(N($(mr))));if("error"in h)throw new H(h.error,`failed to get info for accounts ${a}`);return h.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:s,config:a}=de(t),u=this._buildArgs([e.toBase58()],s,void 0,{...a,epoch:r??(a==null?void 0:a.epoch)}),c=await this._rpcRequest("getStakeActivation",u),h=L(c,Q(hl));if("error"in h)throw new H(h.error,`failed to get Stake Activation ${e.toBase58()}`);return h.result}async getProgramAccounts(e,t){const{commitment:r,config:s}=de(t),{encoding:a,...u}=s||{},c=this._buildArgs([e.toBase58()],r,a||"base64",u),h=await this._rpcRequest("getProgramAccounts",c),p=L(h,Q(N(ul)));if("error"in p)throw new H(p.error,`failed to get accounts owned by program ${e.toBase58()}`);return p.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgs([e.toBase58()],r,"jsonParsed",s),u=await this._rpcRequest("getProgramAccounts",a),c=L(u,Q(N(fl)));if("error"in c)throw new H(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){var a;let r;if(typeof e=="string")r=e;else{const u=e;if((a=u.abortSignal)!=null&&a.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let s;try{s=fe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return me(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,a=!1;const u=new Promise((h,p)=>{try{r=this.onSignature(t,(w,E)=>{r=void 0;const m={context:E,value:w};h({__type:tt.PROCESSED,response:m})},e);const g=new Promise(w=>{r==null?w():s=this._onSubscriptionStateChange(r,E=>{E==="subscribed"&&w()})});(async()=>{if(await g,a)return;const w=await this.getSignatureStatus(t);if(a||w==null)return;const{context:E,value:m}=w;if(m!=null)if(m!=null&&m.err)p(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}a=!0,h({__type:tt.PROCESSED,response:{context:E,value:m}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let a=!1;const u=new Promise(w=>{const E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let m=await E();if(!a){for(;m<=r;)if(await zt(1e3),a||(m=await E(),a))return;w({__type:tt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let g;try{const w=await Promise.race([p,h,u]);if(w.__type===tt.PROCESSED)g=w.response;else throw new ao(s)}finally{a=!0,c()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:a,signature:u}}){let c=!1;const h=new Promise(m=>{let x=a,B=null;const S=async()=>{try{const{context:R,value:I}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return B=R.slot,I==null?void 0:I.nonce}catch{return x}};(async()=>{if(x=await S(),!c)for(;;){if(a!==x){m({__type:tt.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await zt(2e3),c||(x=await S(),c))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:u}),w=this.getCancellationPromise(t);let E;try{const m=await Promise.race([w,g,h]);if(m.__type===tt.PROCESSED)E=m.response;else{let x;for(;;){const B=await this.getSignatureStatus(u);if(B==null)break;if(B.context.slot<(m.slotInWhichNonceDidAdvance??r)){await zt(400);continue}x=B;break}if(x!=null&&x.value){const B=e||"finalized",{confirmationStatus:S}=x.value;switch(B){case"processed":case"recent":if(S!=="processed"&&S!=="confirmed"&&S!=="finalized")throw new lr(u);break;case"confirmed":case"single":case"singleGossip":if(S!=="confirmed"&&S!=="finalized")throw new lr(u);break;case"finalized":case"max":case"root":if(S!=="finalized")throw new lr(u);break;default:}E={context:x.context,value:{err:x.value.err}}}else throw new lr(u)}}finally{c=!0,p()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const s=new Promise(h=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>h({__type:tt.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const h=await Promise.race([u,s]);if(h.__type===tt.PROCESSED)c=h.response;else throw new co(t,h.timeoutMs/1e3)}finally{clearTimeout(r),a()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=L(e,Q(N(vl)));if("error"in t)throw new H(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=L(r,kl);if("error"in s)throw new H(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),a=await this._rpcRequest("getSlot",s),u=L(a,Q(v()));if("error"in u)throw new H(u.error,"failed to get slot");return u.result}async getSlotLeader(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),a=await this._rpcRequest("getSlotLeader",s),u=L(a,Q(P()));if("error"in u)throw new H(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(e,t){const r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),a=L(s,Q(N(xe)));if("error"in a)throw new H(a.error,"failed to get slot leaders");return a.result}async getSignatureStatus(e,t){const{context:r,value:s}=await this.getSignatureStatuses([e],t);me(s.length===1);const a=s[0];return{context:r,value:a}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const s=await this._rpcRequest("getSignatureStatuses",r),a=L(s,_l);if("error"in a)throw new H(a.error,"failed to get signature status");return a.result}async getTransactionCount(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),a=await this._rpcRequest("getTransactionCount",s),u=L(a,Q(v()));if("error"in u)throw new H(u.error,"failed to get transaction count");return u.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=L(r,Zu);if("error"in s)throw new H(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){const{commitment:s,config:a}=de(r),u=this._buildArgs([e.map(p=>p.toBase58())],s,void 0,{...a,epoch:t??(a==null?void 0:a.epoch)}),c=await this._rpcRequest("getInflationReward",u),h=L(c,$u);if("error"in h)throw new H(h.error,"failed to get inflation reward");return h.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=L(e,Yu);if("error"in t)throw new H(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),a=await this._rpcRequest("getEpochInfo",s),u=L(a,el);if("error"in u)throw new H(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=L(e,tl);if("error"in t)throw new H(t.error,"failed to get epoch schedule");const r=t.result;return new Bu(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=L(e,rl);if("error"in t)throw new H(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),a=L(s,Rl);return"error"in a?(console.warn("Unable to fetch minimum balance for rent exemption"),0):a.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),s=L(r,Ml);if("error"in s)throw new H(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=L(t,ql);if("error"in r)throw new H(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),a=L(s,Hl);if("error"in a)throw new H(a.error,"failed to get fee calculator");const{context:u,value:c}=a.result;return{context:u,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const r=Vt(e.serialize()).toString("base64"),s=this._buildArgs([r],t),a=await this._rpcRequest("getFeeForMessage",s),u=L(a,be($(v())));if("error"in u)throw new H(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(e){var u;const t=(u=e==null?void 0:e.lockedWritableAccounts)==null?void 0:u.map(c=>c.toBase58()),r=this._buildArgs(t!=null&&t.length?[t]:[]),s=await this._rpcRequest("getRecentPrioritizationFees",r),a=L(s,Qu);if("error"in a)throw new H(a.error,"failed to get recent prioritization fees");return a.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),a=await this._rpcRequest("getLatestBlockhash",s),u=L(a,Dl);if("error"in u)throw new H(u.error,"failed to get latest blockhash");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=L(e,Q(Wu));if("error"in t)throw new H(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=L(e,Q(P()));if("error"in t)throw new H(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgsAtLeastConfirmed([e],r,void 0,s),u=await this._rpcRequest("getBlock",a);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=L(u,Ll);if("error"in c)throw c.error;return c.result}case"none":{const c=L(u,Pl);if("error"in c)throw c.error;return c.result}default:{const c=L(u,Ul);if("error"in c)throw c.error;const{result:h}=c;return h?{...h,transactions:h.transactions.map(({transaction:p,meta:g,version:w})=>({meta:g,transaction:{...p,message:Un(w,p.message)},version:w}))}:null}}}catch(c){throw new H(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),u=await this._rpcRequest("getBlock",a);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=L(u,Ol);if("error"in c)throw c.error;return c.result}case"none":{const c=L(u,Nl);if("error"in c)throw c.error;return c.result}default:{const c=L(u,Fl);if("error"in c)throw c.error;return c.result}}}catch(c){throw new H(c,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:c,...h}=e;r=c,t=h}const s=this._buildArgs([],r,"base64",t),a=await this._rpcRequest("getBlockProduction",s),u=L(a,Gu);if("error"in u)throw new H(u.error,"failed to get block production information");return u.result}async getTransaction(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgsAtLeastConfirmed([e],r,void 0,s),u=await this._rpcRequest("getTransaction",a),c=L(u,Pn);if("error"in c)throw new H(c.error,"failed to get transaction");const h=c.result;return h&&{...h,transaction:{...h.transaction,message:Un(h.version,h.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:s}=de(t),a=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),u=await this._rpcRequest("getTransaction",a),c=L(u,Tr);if("error"in c)throw new H(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:r,config:s}=de(t),a=e.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(a)).map(h=>{const p=L(h,Tr);if("error"in p)throw new H(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:r,config:s}=de(t),a=e.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],r,void 0,s)}));return(await this._rpcBatchRequest(a)).map(h=>{const p=L(h,Pn);if("error"in p)throw new H(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:Un(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getConfirmedBlock",r),a=L(s,$l);if("error"in a)throw new H(a.error,"failed to get confirmed block");const u=a.result;if(!u)throw new Error("Confirmed block "+e+" not found");const c={...u,transactions:u.transactions.map(({transaction:h,meta:p})=>{const g=new kt(h.message);return{meta:p,transaction:{...h,message:g}}})};return{...c,transactions:c.transactions.map(({transaction:h,meta:p})=>({meta:p,transaction:xt.populate(h.message,h.signatures)}))}}async getBlocks(e,t,r){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),a=await this._rpcRequest("getBlocks",s),u=L(a,Q(N(v())));if("error"in u)throw new H(u.error,"failed to get blocks");return u.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),a=L(s,Ki);if("error"in a)throw new H(a.error,"failed to get block");const u=a.result;if(!u)throw new Error("Block "+e+" not found");return u}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),a=L(s,Ki);if("error"in a)throw new H(a.error,"failed to get confirmed block");const u=a.result;if(!u)throw new Error("Confirmed block "+e+" not found");return u}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getConfirmedTransaction",r),a=L(s,Pn);if("error"in a)throw new H(a.error,"failed to get transaction");const u=a.result;if(!u)return u;const c=new kt(u.transaction.message),h=u.transaction.signatures;return{...u,transaction:xt.populate(c,h)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),a=L(s,Tr);if("error"in a)throw new H(a.error,"failed to get confirmed transaction");return a.result}async getParsedConfirmedTransactions(e,t){const r=e.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const c=L(u,Tr);if("error"in c)throw new H(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},a=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<a));)try{const h=await this.getConfirmedBlockSignatures(t,"finalized");h.signatures.length>0&&(s.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let u=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>u));)try{const h=await this.getConfirmedBlockSignatures(r);h.signatures.length>0&&(s.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),a=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),u=L(a,dl);if("error"in u)throw new H(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),a=await this._rpcRequest("getSignaturesForAddress",s),u=L(a,pl);if("error"in u)throw new H(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let a=null;return s!==null&&(a=new $i({key:e,state:$i.deserialize(s.data)})),{context:r,value:a}}async getNonceAndContext(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let a=null;return s!==null&&(a=hi.fromAccountData(s.data)),{context:r,value:a}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=L(r,zl);if("error"in s)throw new H(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await zt(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Lu;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){const a=await this.getLatestBlockhash("finalized");if(r!==a.blockhash)return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},a;await zt(Ru/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,"base64",r),a=await this._rpcRequest("getStakeMinimumDelegation",s),u=L(a,be(v()));if("error"in u)throw new H(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(e,t,r){if("message"in e){const B=e.serialize(),S=ee.Buffer.from(B).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const R=t||{};R.encoding="base64","commitment"in R||(R.commitment=this.commitment);const I=[S,R],A=await this._rpcRequest("simulateTransaction",I),M=L(A,Mi);if("error"in M)throw new Error("failed to simulate transaction: "+M.error.message);return M.result}let s;if(e instanceof xt){let x=e;s=new xt,s.feePayer=x.feePayer,s.instructions=e.instructions,s.nonceInfo=x.nonceInfo,s.signatures=x.signatures}else s=xt.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const a=t;if(s.nonceInfo&&a)s.sign(...a);else{let x=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(x);if(s.lastValidBlockHeight=B.lastValidBlockHeight,s.recentBlockhash=B.blockhash,!a)break;if(s.sign(...a),!s.signature)throw new Error("!signature");const S=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(S)&&!this._blockhashInfo.transactionSignatures.includes(S)){this._blockhashInfo.simulatedSignatures.push(S);break}else x=!0}}const u=s._compile(),c=u.serialize(),p=s._serialize(c).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:u.nonProgramIds()).map(B=>B.toBase58());g.accounts={encoding:"base64",addresses:x}}a&&(g.sigVerify=!0);const w=[p,g],E=await this._rpcRequest("simulateTransaction",w),m=L(E,Mi);if("error"in m){let x;if("data"in m.error&&(x=m.error.data.logs,x&&Array.isArray(x))){const B=`
    `,S=B+x.join(B);console.error(m.error.message,S)}throw new Oi("failed to simulate transaction: "+m.error.message,x)}return m.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const u=e.serialize();return await this.sendRawTransaction(u,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let u=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(u);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const h=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))u=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}const a=e.serialize();return await this.sendRawTransaction(a,r)}async sendRawTransaction(e,t){const r=Vt(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},s=t&&t.skipPreflight,a=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),a&&(r.preflightCommitment=a);const u=[e,r],c=await this._rpcRequest("sendTransaction",u),h=L(c,jl);if("error"in h){let p;throw"data"in h.error&&(p=h.error.data.logs),new Oi("failed to send transaction: "+h.error.message,p)}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const a=this._subscriptionStateChangeCallbacksByHash[e];a&&a.forEach(u=>{try{u(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var r;const s=this._subscriptionHashByClientSubscriptionId[e];if(s==null)return()=>{};const a=(r=this._subscriptionStateChangeCallbacksByHash)[s]||(r[s]=new Set);return a.add(t),()=>{a.delete(t),a.size===0&&delete this._subscriptionStateChangeCallbacksByHash[s]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:a,method:u}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(u,a);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${u} error for argument`,a,c.message),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:a,unsubscribeMethod:u}=s;if(this._subscriptionsAutoDisposedByRpc.has(a))this._subscriptionsAutoDisposedByRpc.delete(a);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[a])}catch(c){if(c instanceof Error&&console.error(`${u} error:`,c.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(a){console.error(a)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=L(e,gl);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,s=Fi([e.method,t]),a=this._subscriptionsByHash[s];return a===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:a.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[s];me(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const s=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=L(e,wl);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){const a=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=L(e,Gl);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=L(e,bl);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=L(e,El);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){const a=t||this._commitment;if(a||r||s){let u={};r&&(u.encoding=r),a&&(u.commitment=a),s&&(u=Object.assign(u,s)),e.push(u)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){const a=t||this._commitment;if(a&&!["confirmed","finalized"].includes(a))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=L(e,Sl);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),a=this._makeSubscription({callback:(u,c)=>{if(u.type==="status"){t(u.result,c);try{this.removeSignatureListener(a)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}onSignatureWithOptions(e,t,r){const{commitment:s,...a}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([e],s,void 0,a),c=this._makeSubscription({callback:(h,p)=>{t(h,p);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=L(e,Bl);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class pr{constructor(e){this._keypair=void 0,this._keypair=e??Ci()}static generate(){return new pr(Ci())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),a=Mn(s);for(let u=0;u<32;u++)if(r[u]!==a[u])throw new Error("provided secretKey is invalid")}return new pr({publicKey:r,secretKey:e})}static fromSeed(e){const t=Mn(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new pr({publicKey:t,secretKey:r})}get publicKey(){return new G(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:q([W("instruction"),Jt("recentSlot"),ae("bumpSeed")])},FreezeLookupTable:{index:1,layout:q([W("instruction")])},ExtendLookupTable:{index:2,layout:q([W("instruction"),Jt(),Ue(re(),Lt(W(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:q([W("instruction")])},CloseLookupTable:{index:4,layout:q([W("instruction")])}});new G("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:q([ae("instruction"),W("units"),W("additionalFee")])},RequestHeapFrame:{index:1,layout:q([ae("instruction"),W("bytes")])},SetComputeUnitLimit:{index:2,layout:q([ae("instruction"),W("units")])},SetComputeUnitPrice:{index:3,layout:q([ae("instruction"),Jt("microLamports")])}});new G("ComputeBudget111111111111111111111111111111");q([ae("numSignatures"),ae("padding"),He("signatureOffset"),He("signatureInstructionIndex"),He("publicKeyOffset"),He("publicKeyInstructionIndex"),He("messageDataOffset"),He("messageDataSize"),He("messageInstructionIndex")]);new G("Ed25519SigVerify111111111111111111111111111");Qi.hmacSha256Sync=(n,...e)=>{const t=io.create(Nn,n);return e.forEach(r=>t.update(r)),t.digest()};Qi.isValidPrivateKey;q([ae("numSignatures"),He("signatureOffset"),ae("signatureInstructionIndex"),He("ethAddressOffset"),ae("ethAddressInstructionIndex"),He("messageDataOffset"),He("messageDataSize"),ae("messageInstructionIndex"),ye(20,"ethAddress"),ye(64,"signature"),ae("recoveryId")]);new G("KeccakSecp256k11111111111111111111111111111");new G("StakeConfig11111111111111111111111111111111");class qi{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}qi.default=new qi(0,0,G.default);Object.freeze({Initialize:{index:0,layout:q([W("instruction"),fu(),hu()])},Authorize:{index:1,layout:q([W("instruction"),re("newAuthorized"),W("stakeAuthorizationType")])},Delegate:{index:2,layout:q([W("instruction")])},Split:{index:3,layout:q([W("instruction"),Me("lamports")])},Withdraw:{index:4,layout:q([W("instruction"),Me("lamports")])},Deactivate:{index:5,layout:q([W("instruction")])},Merge:{index:7,layout:q([W("instruction")])},AuthorizeWithSeed:{index:8,layout:q([W("instruction"),re("newAuthorized"),W("stakeAuthorizationType"),jt("authoritySeed"),re("authorityOwner")])}});new G("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:q([W("instruction"),du()])},Authorize:{index:1,layout:q([W("instruction"),re("newAuthorized"),W("voteAuthorizationType")])},Withdraw:{index:3,layout:q([W("instruction"),Me("lamports")])},AuthorizeWithSeed:{index:10,layout:q([W("instruction"),pu()])}});new G("Vote111111111111111111111111111111111111111");new G("Va1idator1nfo111111111111111111111111111111");U({name:P(),website:J(P()),details:J(P()),keybaseUsername:J(P())});new G("Vote111111111111111111111111111111111111111");q([re("nodePubkey"),re("authorizedWithdrawer"),ae("commission"),Be(),Ue(q([Be("slot"),W("confirmationCount")]),Lt(W(),-8),"votes"),ae("rootSlotValid"),Be("rootSlot"),Be(),Ue(q([Be("epoch"),re("authorizedVoter")]),Lt(W(),-8),"authorizedVoters"),q([Ue(q([re("authorizedPubkey"),Be("epochOfLastAuthorizedSwitch"),Be("targetEpoch")]),32,"buf"),Be("idx"),ae("isEmpty")],"priorVoters"),Be(),Ue(q([Be("epoch"),Be("credits"),Be("prevCredits")]),Lt(W(),-8),"epochCredits"),q([Be("slot"),Be("timestamp")],"lastTimestamp")]);function Jl(n){return function(e,t,r,s){return e.method==="solana_chainId"?(t.result=n,s()):r()}}function Xl(n){return function(e,t,r,s){return e.method==="solana_provider_config"?(t.result=n,s()):r()}}function Eo(n){var e=n.chainId;return br([Jl(e),Xl(n)])}function Zl(n){var e=n.rpcTarget,t=Lo({rpcTarget:e}),r=br([Eo(n),t]);return{networkMiddleware:r,fetchMiddleware:t}}function Yl(n){var e=n.getAccounts;return Wr(function(){var t=K(_.mark(function r(s,a,u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=s.method,c==="getAccounts"){g.next=3;break}return g.abrupt("return",u());case 3:if(e){g.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return g.next=7,e(s);case 7:return h=g.sent,a.result=h,g.abrupt("return",void 0);case 10:case"end":return g.stop()}},r)}));return function(r,s,a){return t.apply(this,arguments)}}())}function Ql(n){var e=n.requestAccounts;return Wr(function(){var t=K(_.mark(function r(s,a,u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=s.method,c==="requestAccounts"){g.next=3;break}return g.abrupt("return",u());case 3:if(e){g.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return g.next=7,e(s);case 7:return h=g.sent,a.result=h,g.abrupt("return",void 0);case 10:case"end":return g.stop()}},r)}));return function(r,s,a){return t.apply(this,arguments)}}())}function ut(n,e){return Wr(function(){var t=K(_.mark(function r(s,a,u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=s.method,c===n){g.next=3;break}return g.abrupt("return",u());case 3:if(e){g.next=5;break}throw new Error("WalletMiddleware - ".concat(n," not provided"));case 5:return g.next=7,e(s);case 7:return h=g.sent,a.result=h,g.abrupt("return",void 0);case 10:case"end":return g.stop()}},r)}));return function(r,s,a){return t.apply(this,arguments)}}())}function wi(n){var e=n.getAccounts,t=n.requestAccounts,r=n.signTransaction,s=n.signAndSendTransaction,a=n.signAllTransactions,u=n.signMessage,c=n.getPrivateKey,h=n.getSecretKey;return br([Ql({requestAccounts:t}),Yl({getAccounts:e}),ut("signTransaction",r),ut("signAndSendTransaction",s),ut("signAllTransactions",a),ut("signMessage",u),ut("solanaPrivateKey",c),ut("solanaSecretKey",h)])}function ef(n){var e=n.addNewChainConfig,t=n.switchSolanaChain;return br([ut("addSolanaChain",e),ut("switchSolanaChain",t)])}function tf(n){var e=n.updatePrivatekey;return br([ut("updateAccount",e)])}function Hi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hi(Object(t),!0).forEach(function(r){Xt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rf(n){var e=nf();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function nf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var on=function(n){Ot(t,n);var e=rf(t);function t(r){var s=r.config,a=r.state;return At(this,t),e.call(this,{config:{chainConfig:zi(zi({},s.chainConfig),{},{chainNamespace:Pr.SOLANA})},state:a})}return It(t,[{key:"switchChain",value:function(){var r=K(_.mark(function a(u){return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Promise.resolve());case 1:case"end":return h.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var r=K(_.mark(function a(u){var c,h,p,g,w,E;return _.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return c=new Gn,h=this.getProviderHandlers(u),p=wi(h),c.push(p),g=Eo(this.config.chainConfig),c.push(g),w=this.getInjectedProviderProxy(u),w&&c.push(w),E=Vn(c),this.updateProviderEngineProxy(E),x.next=12,this.lookupNetwork();case 12:case"end":return x.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var r=K(_.mark(function a(){var u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.config.chainConfig,this.update({chainId:u.chainId}),h.abrupt("return",u.chainId||"");case 3:case"end":return h.stop()}},a,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"getInjectedProviderProxy",value:function(s){}}]),t}(jn),mi=function(e){var t={requestAccounts:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",e.publicKey?[fe.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getAccounts:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",e.publicKey?[fe.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getPrivateKey:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getSecretKey:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),signTransaction:function(){var r=K(_.mark(function a(u){var c;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,e.signTransaction(u.params.message);case 2:return c=p.sent,p.abrupt("return",c);case 4:case"end":return p.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signMessage:function(){var r=K(_.mark(function a(u){var c;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,e.signMessage(u.params.message,u.params.display);case 2:return c=p.sent,p.abrupt("return",c.signature);case 4:case"end":return p.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signAllTransactions:function(){var r=K(_.mark(function a(u){var c,h,p;return _.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(!((c=u.params)!==null&&c!==void 0&&c.message)||!((h=u.params)!==null&&h!==void 0&&h.message.length))){w.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return w.next=4,e.signAllTransactions(u.params.message);case 4:return p=w.sent,w.abrupt("return",p);case 6:case"end":return w.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signAndSendTransaction:function(){var r=K(_.mark(function a(u){var c;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,e.signAndSendTransaction(u.params.message);case 2:return c=p.sent,p.abrupt("return",{signature:c.signature});case 4:case"end":return p.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}()};return t};function ji(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function sf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ji(Object(t),!0).forEach(function(r){Xt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function So(n){return Wr(function(){var e=K(_.mark(function t(r,s,a){var u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,n.request(sf({},r));case 2:u=h.sent,s.result=u;case 4:case"end":return h.stop()}},t)}));return function(t,r,s){return e.apply(this,arguments)}}())}function of(n){var e=af();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function af(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cf=function(n){Ot(t,n);var e=of(t);function t(){return At(this,t),e.apply(this,arguments)}return It(t,[{key:"getProviderHandlers",value:function(s){return mi(s)}},{key:"getInjectedProviderProxy",value:function(s){return So(s)}}]),t}(on),cf=function(e,t){var r={requestAccounts:function(){var s=K(_.mark(function u(){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.connect();case 2:return c=g.sent,h=c.data,g.abrupt("return",[h.publicKey]);case 5:case"end":return g.stop()}},u)}));function a(){return s.apply(this,arguments)}return a}(),getAccounts:function(){var s=K(_.mark(function u(){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.connect();case 2:return c=g.sent,h=c.data,g.abrupt("return",[h.publicKey]);case 5:case"end":return g.stop()}},u)}));function a(){return s.apply(this,arguments)}return a}(),getPrivateKey:function(){var s=K(_.mark(function u(){return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return h.stop()}},u)}));function a(){return s.apply(this,arguments)}return a}(),getSecretKey:function(){var s=K(_.mark(function u(){return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return h.stop()}},u)}));function a(){return s.apply(this,arguments)}return a}(),signTransaction:function(){var s=K(_.mark(function u(c){var h,p,g,w,E;return _.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(h=c.params.message,h){x.next=3;break}throw ne.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 3:return x.next=5,e.signTransaction(fe.encode(h.serializeMessage()));case 5:if(p=x.sent,g=p.data,!(!g.publicKey||!g.signature)){x.next=9;break}throw new Error("Invalid signature from slope wallet");case 9:return w=new G(g.publicKey),E=fe.decode(g.signature),h.addSignature(w,Buffer.from(E)),x.abrupt("return",h);case 13:case"end":return x.stop()}},u)}));function a(u){return s.apply(this,arguments)}return a}(),signMessage:function(){var s=K(_.mark(function u(c){var h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.signMessage(c.params.message);case 2:return h=g.sent,g.abrupt("return",fe.decode(h.data.signature));case 4:case"end":return g.stop()}},u)}));function a(u){return s.apply(this,arguments)}return a}(),signAndSendTransaction:function(){var s=K(_.mark(function u(c){var h,p,g,w,E,m,x,B,S;return _.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(h=t(),h){I.next=3;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:if(p=c.params.message,p){I.next=6;break}throw ne.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 6:return I.next=8,e.signTransaction(fe.encode(p.serializeMessage()));case 8:if(g=I.sent,w=g.data,!(!w.publicKey||!w.signature)){I.next=12;break}throw new Error("Invalid signature from slope wallet");case 12:return E=new G(w.publicKey),m=fe.decode(w.signature),p.addSignature(E,Buffer.from(m)),I.next=17,h.request({method:"solana_provider_config",params:[]});case 17:return x=I.sent,B=new yi(x.rpcTarget),I.next=21,B.sendRawTransaction(p.serialize());case 21:return S=I.sent,I.abrupt("return",{signature:S});case 23:case"end":return I.stop()}},u)}));function a(u){return s.apply(this,arguments)}return a}(),signAllTransactions:function(){var s=K(_.mark(function u(c){var h,p,g,w,E,m,x,B,S,R,I,A;return _.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(!((h=c.params)!==null&&h!==void 0&&h.message)||!((p=c.params)!==null&&p!==void 0&&p.message.length))){T.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:for(w=c.params.message,E=w.length,m=[],x=0;x<E;x++)m.push(fe.encode(c.params.message[x].serializeMessage()));return T.next=8,e.signAllTransactions(m);case 8:if(B=T.sent,S=B.msg,R=B.data,!(!R.publicKey||((g=R.signatures)===null||g===void 0?void 0:g.length)!==E)){T.next=13;break}throw new Error(S);case 13:for(I=new G(R.publicKey),x=0;x<E;x++)A=fe.decode(R.signatures[x]),w[x].addSignature(I,Buffer.from(A));return T.abrupt("return",w);case 16:case"end":return T.stop()}},u)}));function a(u){return s.apply(this,arguments)}return a}()};return r};function uf(n){var e=lf();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function lf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uf=function(n){Ot(t,n);var e=uf(t);function t(){return At(this,t),e.apply(this,arguments)}return It(t,[{key:"getProviderHandlers",value:function(s){return cf(s,this.getProviderEngineProxy.bind(this))}}]),t}(on),ff=function(e,t){var r=mi(e);return r.signAndSendTransaction=function(){var s=K(_.mark(function a(u){var c,h,p,g,w;return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c=t(),c){m.next=3;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return m.next=5,e.signTransaction(u.params.message);case 5:return h=m.sent,m.next=8,c.request({method:"solana_provider_config",params:[]});case 8:return p=m.sent,g=new yi(p.rpcTarget),m.next=12,g.sendRawTransaction(h.serialize());case 12:return w=m.sent,m.abrupt("return",{signature:w});case 14:case"end":return m.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),r};function hf(n){var e=df();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function df(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pf=function(n){Ot(t,n);var e=hf(t);function t(){return At(this,t),e.apply(this,arguments)}return It(t,[{key:"getProviderHandlers",value:function(s){return ff(s,this.getProviderEngineProxy.bind(this))}}]),t}(on),pf=function(e,t){var r=mi(e);return r.signMessage=function(){var s=K(_.mark(function a(u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e.sign(u.params.message,"utf8");case 2:return c=g.sent,h=c.signature,g.abrupt("return",h);case 5:case"end":return g.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),r.signAndSendTransaction=function(){var s=K(_.mark(function a(u){var c,h,p,g,w;return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c=t(),c){m.next=3;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return m.next=5,e.signTransaction(u.params.message);case 5:return h=m.sent,m.next=8,c.request({method:"solana_provider_config",params:[]});case 8:return p=m.sent,g=new yi(p.rpcTarget),m.next=12,g.sendRawTransaction(h.serialize());case 12:return w=m.sent,m.abrupt("return",{signature:w});case 14:case"end":return m.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),r};function gf(n){var e=yf();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function yf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lf=function(n){Ot(t,n);var e=gf(t);function t(){return At(this,t),e.apply(this,arguments)}return It(t,[{key:"getProviderHandlers",value:function(s){return pf(s,this.getProviderEngineProxy.bind(this))}}]),t}(on),wf=function(e){var t={requestAccounts:function(){var r=K(_.mark(function a(){var u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,e.request({method:"solana_requestAccounts",params:{}});case 2:return u=h.sent,h.abrupt("return",u);case 4:case"end":return h.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getAccounts:function(){var r=K(_.mark(function a(){var u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,e.request({method:"solana_requestAccounts",params:{}});case 2:return u=h.sent,h.abrupt("return",u);case 4:case"end":return h.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getPrivateKey:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),getSecretKey:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw ne.ethErrors.rpc.methodNotSupported();case 1:case"end":return c.stop()}},a)}));function s(){return r.apply(this,arguments)}return s}(),signMessage:function(){var r=K(_.mark(function a(u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((c=u.params)!==null&&c!==void 0&&c.message){g.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return g.next=4,e.signMessage(u.params.message);case 4:return h=g.sent,g.abrupt("return",h);case 6:case"end":return g.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signTransaction:function(){var r=K(_.mark(function a(u){var c,h,p;return _.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if((c=u.params)!==null&&c!==void 0&&c.message){w.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return h=u.params.message,w.next=5,e.signTransaction(h);case 5:return p=w.sent,w.abrupt("return",p);case 7:case"end":return w.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signAndSendTransaction:function(){var r=K(_.mark(function a(u){var c,h,p;return _.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if((c=u.params)!==null&&c!==void 0&&c.message){w.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return h=u.params.message,w.next=5,e.sendTransaction(h);case 5:return p=w.sent,w.abrupt("return",{signature:p});case 7:case"end":return w.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}(),signAllTransactions:function(){var r=K(_.mark(function a(u){var c,h,p,g;return _.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!((c=u.params)!==null&&c!==void 0&&c.message)||!((h=u.params)!==null&&h!==void 0&&h.message.length))){E.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return p=u.params.message,E.next=5,e.signAllTransactions(p);case 5:return g=E.sent,E.abrupt("return",g);case 7:case"end":return E.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}()};return t};function Wi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Cr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wi(Object(t),!0).forEach(function(r){Xt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mf(n){var e=bf();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function bf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ff=function(n){Ot(t,n);var e=mf(t);function t(r){var s=r.config,a=r.state;return At(this,t),e.call(this,{config:{chainConfig:Cr(Cr({},s.chainConfig),{},{chainNamespace:Pr.SOLANA})},state:a})}return It(t,[{key:"switchChain",value:function(){var r=K(_.mark(function a(u){return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Promise.resolve());case 1:case"end":return h.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var r=K(_.mark(function a(u){return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.handleInjectedProviderUpdate(u),h.next=3,this.setupEngine(u);case 3:case"end":return h.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var r=K(_.mark(function a(){var u,c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.provider){g.next=2;break}throw ne.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return u=this.config.chainConfig.chainId,g.next=5,this.provider.request({method:"solana_chainId"});case 5:if(c=g.sent,h=xi(c.toString())?c:"0x".concat(parseInt(c,10).toString(16)),u===h){g.next=9;break}throw Wn.rpcConnectionError("Invalid network, net_version is: ".concat(h,", expected: ").concat(u));case 9:return this.update({chainId:h}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),g.abrupt("return",this.state.chainId);case 13:case"end":return g.stop()}},a,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"setupEngine",value:function(){var r=K(_.mark(function a(u){var c,h,p,g,w;return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return c=wf(u),h=wi(c),p=So(u),g=new Gn,g.push(h),g.push(p),w=Vn(g),this.updateProviderEngineProxy(w),m.next=10,this.lookupNetwork();case 10:case"end":return m.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"handleInjectedProviderUpdate",value:function(){var r=K(_.mark(function a(u){var c=this;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u.on("accountsChanged",function(){var g=K(_.mark(function w(E){return _.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:c.provider.emit("accountsChanged",E);case 1:case"end":return x.stop()}},w)}));return function(w){return g.apply(this,arguments)}}()),u.on("chainChanged",function(){var g=K(_.mark(function w(E){var m;return _.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return m=xi(E)?E:"0x".concat(parseInt(E,10).toString(16)),c.configure({chainConfig:Cr(Cr({},c.config.chainConfig),{},{chainId:m})}),B.next=4,c.setupProvider(u);case 4:case"end":return B.stop()}},w)}));return function(w){return g.apply(this,arguments)}}());case 2:case"end":return p.stop()}},a)}));function s(a){return r.apply(this,arguments)}return s}()}]),t}(jn);function xf(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Ef(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,s=function(){};return{s,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,u=!1,c;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){u=!0,c=p},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(u)throw c}}}}function Ef(n,e){if(n){if(typeof n=="string")return Gi(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gi(n,e)}}function Gi(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Sf(n){return zn.apply(this,arguments)}function zn(){return zn=K(_.mark(function n(e){var t,r,s,a,u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(t=e.privKey,r=e.getProviderEngineProxy,s=function(){return pr.fromSecretKey(Buffer.from(t,"hex"))},typeof t=="string"){h.next=4;break}throw Wn.invalidParams("privKey must be a string");case 4:return a=s(),u={requestAccounts:function(){var p=K(_.mark(function w(){return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",[a.publicKey.toBase58()]);case 1:case"end":return m.stop()}},w)}));function g(){return p.apply(this,arguments)}return g}(),getAccounts:function(){var p=K(_.mark(function w(){return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",[a.publicKey.toBase58()]);case 1:case"end":return m.stop()}},w)}));function g(){return p.apply(this,arguments)}return g}(),getPrivateKey:function(){var p=K(_.mark(function w(){return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",t);case 1:case"end":return m.stop()}},w)}));function g(){return p.apply(this,arguments)}return g}(),getSecretKey:function(){var p=K(_.mark(function w(){return _.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",fe.encode(a.secretKey));case 1:case"end":return m.stop()}},w)}));function g(){return p.apply(this,arguments)}return g}(),signTransaction:function(){var p=K(_.mark(function w(E){var m,x;return _.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if((m=E.params)!==null&&m!==void 0&&m.message){S.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return x=E.params.message,x.partialSign(a),S.abrupt("return",x);case 5:case"end":return S.stop()}},w)}));function g(w){return p.apply(this,arguments)}return g}(),signMessage:function(){var p=K(_.mark(function w(E){var m,x;return _.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if((m=E.params)!==null&&m!==void 0&&m.message){S.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:return x=Fo.sign.detached(E.params.message,a.secretKey),S.abrupt("return",x);case 4:case"end":return S.stop()}},w)}));function g(w){return p.apply(this,arguments)}return g}(),signAndSendTransaction:function(){var p=K(_.mark(function w(E){var m,x,B,S;return _.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((m=E.params)!==null&&m!==void 0&&m.message){I.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:if(x=r(),x){I.next=5;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return B=E.params.message,B.sign(a),I.next=9,x.request({method:"sendTransaction",params:[fe.encode(B.serialize())]});case 9:return S=I.sent,I.abrupt("return",{signature:S});case 11:case"end":return I.stop()}},w)}));function g(w){return p.apply(this,arguments)}return g}(),signAllTransactions:function(){var p=K(_.mark(function w(E){var m,x,B,S,R,I,A,M;return _.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!((m=E.params)!==null&&m!==void 0&&m.message)||!((x=E.params)!==null&&x!==void 0&&x.message.length))){D.next=2;break}throw ne.ethErrors.rpc.invalidParams("message");case 2:S=(B=E.params)===null||B===void 0?void 0:B.message,R=xf(S||[]);try{for(R.s();!(I=R.n()).done;)A=I.value,M=A,M.partialSign(a)}catch(O){R.e(O)}finally{R.f()}return D.abrupt("return",S);case 6:case"end":return D.stop()}},w)}));function g(w){return p.apply(this,arguments)}return g}()},h.abrupt("return",u);case 7:case"end":return h.stop()}},n)})),zn.apply(this,arguments)}function Vi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ji(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vi(Object(t),!0).forEach(function(r){Xt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Bf(n){var e=vf();return function(){var r=Le(n),s;if(e){var a=Le(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return Nt(this,s)}}function vf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Xi=function(n){Ot(t,n);var e=Bf(t);function t(r){var s=r.config,a=r.state;return At(this,t),e.call(this,{config:{chainConfig:Ji(Ji({},s.chainConfig),{},{chainNamespace:Pr.SOLANA})},state:a})}return It(t,[{key:"enable",value:function(){var r=K(_.mark(function a(){return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.state.privateKey){c.next=2;break}throw ne.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return c.next=4,this.setupProvider(this.state.privateKey);case 4:return c.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return c.stop()}},a,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var r=K(_.mark(function a(u){var c,h,p,g,w,E;return _.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Sf({privKey:u,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return c=x.sent,h=wi(c),p=new Gn,g=Zl(this.config.chainConfig),w=g.networkMiddleware,p.push(this.getChainSwitchMiddleware()),p.push(this.getAccountMiddleware()),p.push(h),p.push(w),E=Vn(p),this.updateProviderEngineProxy(E),x.next=14,this.lookupNetwork();case 14:case"end":return x.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"updateAccount",value:function(){var r=K(_.mark(function a(u){var c;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this._providerEngineProxy){p.next=2;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return p.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(c=p.sent,c===u.privateKey){p.next=14;break}return p.next=8,this.setupProvider(u.privateKey);case 8:return p.t0=this._providerEngineProxy,p.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:p.t1=p.sent,p.t2={accounts:p.t1},p.t0.emit.call(p.t0,"accountsChanged",p.t2);case 14:case"end":return p.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"switchChain",value:function(){var r=K(_.mark(function a(u){var c,h;return _.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this._providerEngineProxy){g.next=2;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return c=this.getChainConfig(u.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:c}),g.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return h=g.sent,g.next=10,this.setupProvider(h);case 10:case"end":return g.stop()}},a,this)}));function s(a){return r.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var r=K(_.mark(function a(){var u,c;return _.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this._providerEngineProxy){p.next=2;break}throw ne.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return p.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(u=p.sent,c=this.config.chainConfig,u==="ok"){p.next=8;break}throw Wn.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(c.rpcTarget));case 8:return this.update({chainId:c.chainId}),this.state.chainId!==c.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),p.abrupt("return",this.state.chainId);case 11:case"end":return p.stop()}},a,this)}));function s(){return r.apply(this,arguments)}return s}()},{key:"getChainSwitchMiddleware",value:function(){var s=this,a={addNewChainConfig:function(){var c=K(_.mark(function p(g){var w,E,m,x,B,S;return _.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(g.params){I.next=2;break}throw ne.ethErrors.rpc.invalidParams("Missing request params");case 2:if(w=g.params,E=w.chainId,m=w.chainName,x=w.rpcUrls,B=w.blockExplorerUrls,S=w.nativeCurrency,E){I.next=5;break}throw ne.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!x||x.length===0)){I.next=7;break}throw ne.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(S){I.next=9;break}throw ne.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:s.addChain({chainNamespace:Pr.SOLANA,chainId:E,ticker:(S==null?void 0:S.symbol)||"SOL",tickerName:(S==null?void 0:S.name)||"Solana",displayName:m,rpcTarget:x[0],blockExplorer:(B==null?void 0:B[0])||""});case 10:case"end":return I.stop()}},p)}));function h(p){return c.apply(this,arguments)}return h}(),switchSolanaChain:function(){var c=K(_.mark(function p(g){return _.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(g.params){E.next=2;break}throw ne.ethErrors.rpc.invalidParams("Missing request params");case 2:if(g.params.chainId){E.next=4;break}throw ne.ethErrors.rpc.invalidParams("Missing chainId");case 4:return E.next=6,s.switchChain(g.params);case 6:case"end":return E.stop()}},p)}));function h(p){return c.apply(this,arguments)}return h}()},u=ef(a);return u}},{key:"getAccountMiddleware",value:function(){var s=this,a={updatePrivatekey:function(){var u=K(_.mark(function h(p){var g;return _.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(p.params){E.next=2;break}throw ne.ethErrors.rpc.invalidParams("Missing request params");case 2:if(p.params.privateKey){E.next=4;break}throw ne.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return g=p.params.privateKey,E.next=7,s.updateAccount({privateKey:g});case 7:case"end":return E.stop()}},h)}));function c(h){return u.apply(this,arguments)}return c}()};return tf(a)}}]),t}(jn);Xt(Xi,"getProviderInstance",function(){var n=K(_.mark(function e(t){var r;return _.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=new Xi({config:{chainConfig:t.chainConfig}}),a.next=3,r.setupProvider(t.privKey);case 3:return a.abrupt("return",r);case 4:case"end":return a.stop()}},e)}));return function(e){return n.apply(this,arguments)}}());var Of=function(){function n(e){At(this,n),Xt(this,"provider",void 0),this.provider=e}return It(n,[{key:"requestAccounts",value:function(){var e=K(_.mark(function r(){var s;return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"signAndSendTransaction",value:function(){var e=K(_.mark(function r(s){var a,u;return _.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:s}});case 2:return a=h.sent,u=a.signature,h.abrupt("return",{signature:u});case 5:case"end":return h.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"signTransaction",value:function(){var e=K(_.mark(function r(s){var a;return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.provider.request({method:"signTransaction",params:{message:s}});case 2:return a=c.sent,c.abrupt("return",a);case 4:case"end":return c.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"signAllTransactions",value:function(){var e=K(_.mark(function r(s){var a;return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.provider.request({method:"signAllTransactions",params:{message:s}});case 2:return a=c.sent,c.abrupt("return",a);case 4:case"end":return c.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"signMessage",value:function(){var e=K(_.mark(function r(s){var a;return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.provider.request({method:"signMessage",params:{message:s}});case 2:return a=c.sent,c.abrupt("return",a);case 4:case"end":return c.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=K(_.mark(function r(s){var a;return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.provider.request(s);case 2:return a=c.sent,c.abrupt("return",a);case 4:case"end":return c.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()}]),n}();export{Cf as PhantomInjectedProvider,Uf as SlopeInjectedProxyProvider,Xi as SolanaPrivateKeyProvider,Of as SolanaWallet,Pf as SolflareInjectedProvider,Lf as SolletInjectedProvider,Ff as TorusInjectedProvider};
