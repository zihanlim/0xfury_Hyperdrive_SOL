import*as e from"react";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},n.apply(this,arguments)}function t(t){var u=void 0===t?{}:t,r=u.values,l=u.onChange,o=u.onComplete,a=u.actionRef,i=u.autoFocus,c=void 0!==i&&i,f=u.defaultValues,s=void 0===f?Array(6).fill(""):f,d=u.type,v=void 0===d?"numeric":d,p=u.otp,b=void 0!==p&&p,h=u.placeholder,C=void 0===h?"â—‹":h,g=u.disabled,k=void 0!==g&&g,m=u.mask,y=void 0!==m&&m,x=u.error,j=void 0!==x&&x,O=e.useState(s),w=O[0],A=O[1],F=e.useState(-1),I=F[0],B=F[1],R=void 0!==r,S=R?r:w,$="alphanumeric"===v,z=e.useRef(Array(S.length).fill(null)),D=e.useCallback(function(e){var n;void 0===e&&(e=0),null==(n=z.current[e])||n.focus()},[]);e.useEffect(function(){c&&D()},[c,D]);var E=e.useCallback(function(){var e;null==(e=z.current[I])||e.blur()},[I]);e.useImperativeHandle(a,function(){return{focus:function(e){void 0===e&&(e=0);var n=S.findIndex(function(e){return!e});D(j?-1===n?e:n:e)},blur:E}},[E,D,S,j]);var H=e.useCallback(function(e){return function(n){z.current[e]=n}},[]),K=e.useCallback(function(e){R||A(e),null==l||l(e)},[R,A,l]),M=e.useCallback(function(e){return function(n){var t=n.target.value;if(t=t.trim(),($?/^[a-z\d]*$/i:/^\d*$/).test(t))if($&&(t=t.toUpperCase()),t.length>2)t.length===S.length&&(K(t.split("")),null==o||o(t));else{if(2===t.length){var u=S[e];if(u===t[0])t=t[1];else{if(u!==t[1])return;t=t[0]}}var r=S.slice();if(r[e]=t,K(r),t&&(r.includes("")||null==o||o(r.join("")),e!==S.length-1))if(j){var l=r.findIndex(function(e){return!e});-1!==l&&D(l)}else D(e+1)}}},[$,S,K,o,D,j]),P=e.useCallback(function(e){return function(n){"Backspace"===n.key&&!S[e]&&e&&D(e-1)}},[S,D]),U=e.useCallback(function(e){var n=(void 0===e?{}:e).focus,t=void 0!==n&&n;K(Array(S.length).fill("")),t?D():E()},[K,S,D,E]),V=e.useCallback(function(e){return function(){B(e)}},[]),q=e.useCallback(function(){B(-1)},[]),G=-1!==I;return{fields:S.map(function(e,t){return n({ref:H(t),value:e,disabled:k,autoComplete:b?"one-time-code":"off",inputMode:$?"text":"numeric",type:y?"password":"text",placeholder:G?"":C},!k&&{onBlur:q,onFocus:V(t),onChange:M(t),onKeyDown:P(t)})}),clear:U,isFocused:G}}export{t as usePinInput};
//# sourceMappingURL=index.module.js.map
